<!DOCTYPE html><html lang="en" > <!-- The Head v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2017-2019 Cotes Chung MIT License --><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Financial risk management homework 1 | Zhihao HUANG</title><meta name="generator" content="Jekyll v4.1.1" /><meta property="og:title" content="Financial risk management homework 1" /><meta name="author" content="Zhihao HUANG" /><meta property="og:locale" content="en_US" /><meta name="description" content="黄之豪的个人博客" /><meta property="og:description" content="黄之豪的个人博客" /><link rel="canonical" href="https://huangzhihao1994.github.io//posts/financial-risk-management-hw1/" /><meta property="og:url" content="https://huangzhihao1994.github.io//posts/financial-risk-management-hw1/" /><meta property="og:site_name" content="Zhihao HUANG" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2020-10-21T16:34:00+08:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Financial risk management homework 1" /><meta name="twitter:site" content="@Zhihao HUANG" /><meta name="twitter:creator" content="@Zhihao HUANG" /><meta name="google-site-verification" content="QM6we5c-SoABV8raPyRUt4VqqMBe1n6JTKMI6JZ02xU" /> <script type="application/ld+json"> {"description":"黄之豪的个人博客","@type":"BlogPosting","headline":"Financial risk management homework 1","dateModified":"2020-10-21T16:34:00+08:00","datePublished":"2020-10-21T16:34:00+08:00","url":"https://huangzhihao1994.github.io//posts/financial-risk-management-hw1/","mainEntityOfPage":{"@type":"WebPage","@id":"https://huangzhihao1994.github.io//posts/financial-risk-management-hw1/"},"author":{"@type":"Person","name":"Zhihao HUANG"},"@context":"https://schema.org"}</script> <!-- The Favicons for Web, Android, Microsoft, and iOS (iPhone and iPad) Apps Generated by: https://www.favicon-generator.org/ v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2019 Cotes Chung Published under the MIT license --><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon.png"><link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon-precomposed.png"><link rel="apple-touch-icon" sizes="57x57" href="/assets/img/favicons/apple-icon-57x57.png"><link rel="apple-touch-icon" sizes="60x60" href="/assets/img/favicons/apple-icon-60x60.png"><link rel="apple-touch-icon" sizes="72x72" href="/assets/img/favicons/apple-icon-72x72.png"><link rel="apple-touch-icon" sizes="76x76" href="/assets/img/favicons/apple-icon-76x76.png"><link rel="apple-touch-icon" sizes="114x114" href="/assets/img/favicons/apple-icon-114x114.png"><link rel="apple-touch-icon" sizes="120x120" href="/assets/img/favicons/apple-icon-120x120.png"><link rel="apple-touch-icon" sizes="144x144" href="/assets/img/favicons/apple-icon-144x144.png"><link rel="apple-touch-icon" sizes="152x152" href="/assets/img/favicons/apple-icon-152x152.png"><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-icon-180x180.png"><link rel="icon" type="image/png" sizes="192x192" href="/assets/img/favicons/android-icon-192x192.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="96x96" href="/assets/img/favicons/favicon-96x96.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/manifest.json"><meta name='msapplication-config' content='/assets/img/favicons/browserconfig.xml'><meta name="msapplication-TileColor" content="#ffffff"><meta name="msapplication-TileImage" content="/assets/img/favicons/ms-icon-144x144.png"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="cdn.jsdelivr.net"><link rel="dns-prefetch" href="cdn.jsdelivr.net"><link rel="preload" as="style" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha256-LA89z+k9fjgMKQ/kq4OO2Mrf8VltYml/VES+Rg0fh20=" crossorigin><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha256-LA89z+k9fjgMKQ/kq4OO2Mrf8VltYml/VES+Rg0fh20=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css" integrity="sha256-+N4/V/SbAFiW1MPBCXnfnP9QSN3+Keu+NlB+0ev/YKQ=" crossorigin="anonymous"> <!-- CSS selector for site. Chirpy v2.3 https://github.com/cotes2020/jekyll-theme-chirpy © 2020 Cotes Chung MIT Licensed --><link rel="preload" as="style" href="/assets/css/post.css"><link rel="stylesheet" href="/assets/css/post.css"><link rel="preload" as="script" href="https://cdn.jsdelivr.net/npm/jquery@3.4.1" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"> <script src="https://cdn.jsdelivr.net/npm/jquery@3.4.1" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.15.0,npm/bootstrap@4.0.0/dist/js/bootstrap.min.js" async></script> <!-- JS selector for site. Chirpy v2.3 https://github.com/cotes2020/jekyll-theme-chirpy © 2020 Cotes Chung MIT Licensed --> <script src="/assets/js/post.min.js" async></script> <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js" async></script> <script src="/app.js" defer></script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column"> <!-- The Side Bar v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2017-2019 Cotes Chung MIT License --><div id="nav-wrapper"><div id="profile-wrapper" class="d-flex flex-column"><div id="avatar" class="d-flex justify-content-center"> <a href="/" alt="avatar"> <img src="/assets/img/sample/avatar.jpg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="profile-text mt-3"><div class="site-title"> <a href="/">Zhihao HUANG</a></div><div class="site-subtitle font-italic">阿柴历险记</div></div></div><ul class="nav flex-column"><li class="nav-item d-flex justify-content-center "> <a href="/" class="nav-link d-flex justify-content-center align-items-center w-100"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a></li><li class="nav-item d-flex justify-content-center "> <a href="/tabs/categories/" class="nav-link d-flex justify-content-center align-items-center w-100"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a></li><li class="nav-item d-flex justify-content-center "> <a href="/tabs/tags/" class="nav-link d-flex justify-content-center align-items-center w-100"> <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a></li><li class="nav-item d-flex justify-content-center "> <a href="/tabs/archives/" class="nav-link d-flex justify-content-center align-items-center w-100"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a></li><li class="nav-item d-flex justify-content-center "> <a href="/tabs/about/" class="nav-link d-flex justify-content-center align-items-center w-100"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></li></ul></div><div class="sidebar-bottom d-flex flex-wrap justify-content-around mt-4"> <span id="mode-toggle-wrapper"> <!-- Switch the mode between dark and light. v2.1 https://github.com/cotes2020/jekyll-theme-chirpy © 2020 Cotes Chung MIT License --> <i class="mode-toggle fas fa-sun" dark-mode-invisible></i> <i class="mode-toggle fas fa-moon" light-mode-invisible></i> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } constructor() { if (this.mode != null) { if (this.mode == ModeToggle.DARK_MODE) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } var self = this; /* always follow the system prefers */ this.sysDarkPrefers.addListener(function() { if (self.mode != null) { if (self.mode == ModeToggle.DARK_MODE) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } }); } /* constructor() */ setDark() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_KEY); sessionStorage.removeItem(ModeToggle.MODE_KEY); } get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode == ModeToggle.DARK_MODE; } get isLightkMode() { return this.mode == ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } flipMode() { if (this.hasMode) { if (this.isSysDarkPrefer) { if (this.isLightkMode) { this.clearMode(); } else { this.setLight(); } } else { if (this.isDarkMode) { this.clearMode(); } else { this.setDark(); } } } else { if (this.isSysDarkPrefer) { this.setLight(); } else { this.setDark(); } } } /* flipMode() */ } /* ModeToggle */ let toggle = new ModeToggle(); $(".mode-toggle").click(function() { toggle.flipMode(); }); </script> </span> <span class="icon-border"></span> <a href="https://github.com/HUANGZHIHAO1994" target="_blank"> <i class="fab fa-github-alt"></i> </a> <a href="https://twitter.com/Zhihao HUANG" target="_blank"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:window.open('mailto:' + ['huang_zhihao','163.com'].join('@'))" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" > <i class="fas fa-rss"></i> </a></div></div><!-- The Top Bar v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2017-2019 Cotes Chung MIT License --><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Posts </a> </span> <span>Financial risk management homework 1</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"> <!-- Refactor the HTML structure. --> <!-- Suroundding the markdown table with '<div class="table-wrapper">. and '</div>' --> <!-- Fixed kramdown code highlight rendering: https://github.com/penibelst/jekyll-compress-html/issues/101 https://github.com/penibelst/jekyll-compress-html/issues/71#issuecomment-188144901 --><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>Financial risk management homework 1</h1><div class="post-meta text-muted d-flex flex-column"><div> Posted <!-- Date format snippet v2.4.1 https://github.com/cotes2020/jekyll-theme-chirpy © 2020 Cotes Chung MIT License --> <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Wed, Oct 21, 2020, 4:34 PM +0800" > Oct 21 <i class="unloaded">2020-10-21T16:34:00+08:00</i> </span> by <span class="author"> Zhihao HUANG </span></div><div> Updated <!-- Date format snippet v2.4.1 https://github.com/cotes2020/jekyll-theme-chirpy © 2020 Cotes Chung MIT License --> <span class="timeago lastmod" data-toggle="tooltip" data-placement="bottom" title="Thu, Oct 29, 2020, 4:46 PM +0000" > Oct 29 <i class="unloaded">2020-10-30T00:46:46+08:00</i> </span></div></div><div class="post-content"><div align="left"> <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 " data-src="https://ftp.bmp.ovh/imgs/2020/08/b77a8439ea51e080.jpg" height="50" width="50" /></div><p><a href="https://github.com/HUANGZHIHAO1994/Financial-risk-management/tree/main/fin_risk_hw1">相关代码和结果</a></p><h1 id="一涉及内容">一、涉及内容</h1><p>第一次作业涉及：</p><ul><li><strong>投资组合理论（第一题）：</strong> 马科维茨（Markowitz）投资组合二次规划求解、蒙特卡洛方法求解有效前沿、资本市场线、动态调整权重</li><li><strong>CAPM模型（第二题）：</strong> Beta系数求解、alpha检验、GRS检验</li><li><strong>期权定价模型（第三题）：</strong> n步二叉树欧式美式看涨看跌期权定价、Black Scholes公式（BS公式）看涨看跌期权定价</li></ul><h1 id="二项目结构及相关说明">二、项目结构及相关说明</h1><h2 id="1-结构及说明">1. 结构及说明</h2><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
</pre><td class="rouge-code"><pre>.
├── alpha_test
│   ├── alpha_test_GRS.txt
│   └── alpha_test.txt
├── beta
│   └── beta.txt
├── Binary_Tree.py
├── compare
│   ├── compare_Markowitz.txt
│   ├── compare_MontoCarlo_alpha0.txt
│   └── compare_MontoCarlo.txt
├── config.py
├── draw_tree_picture.py
├── Homework1.pdf
├── hw1_1.py
├── hw1_2.py
├── hw1_3.py
├── HW1.xlsx
├── images
│   ├── HS300与Markowitz投资组合收益比较：20150105--20150630.png
│   ├── HS300与Markowitz投资组合收益比较：20150105--20191230.png
│   ├── HS300与Markowitz投资组合收益比较：20150701--20151231.png
│   ├── HS300与Markowitz投资组合收益比较：20160104--20160630.png
│   ├── HS300与Markowitz投资组合收益比较：20160701--20161230.png
│   ├── HS300与Markowitz投资组合收益比较：20170103--20170630.png
│   ├── HS300与Markowitz投资组合收益比较：20170703--20171229.png
│   ├── HS300与Markowitz投资组合收益比较：20180102--20180629.png
│   ├── HS300与Markowitz投资组合收益比较：20180702--20181228.png
│   ├── HS300与Markowitz投资组合收益比较：20190102--20190628.png
│   ├── HS300与Markowitz投资组合收益比较：20190701--20191230.png
│   ├── HS300与MontoCarlo_alpha0投资组合收益比较：20150105--20150630.png
│   ├── HS300与MontoCarlo_alpha0投资组合收益比较：20150105--20191230.png
│   ├── HS300与MontoCarlo_alpha0投资组合收益比较：20150701--20151231.png
│   ├── HS300与MontoCarlo_alpha0投资组合收益比较：20160104--20160630.png
│   ├── HS300与MontoCarlo_alpha0投资组合收益比较：20160701--20161230.png
│   ├── HS300与MontoCarlo_alpha0投资组合收益比较：20170103--20170630.png
│   ├── HS300与MontoCarlo_alpha0投资组合收益比较：20170703--20171229.png
│   ├── HS300与MontoCarlo_alpha0投资组合收益比较：20180102--20180629.png
│   ├── HS300与MontoCarlo_alpha0投资组合收益比较：20180702--20181228.png
│   ├── HS300与MontoCarlo_alpha0投资组合收益比较：20190102--20190628.png
│   ├── HS300与MontoCarlo_alpha0投资组合收益比较：20190701--20191230.png
│   ├── HS300与MontoCarlo投资组合收益比较：20150105--20150630.png
│   ├── HS300与MontoCarlo投资组合收益比较：20150105--20191230.png
│   ├── HS300与MontoCarlo投资组合收益比较：20150701--20151231.png
│   ├── HS300与MontoCarlo投资组合收益比较：20160104--20160630.png
│   ├── HS300与MontoCarlo投资组合收益比较：20160701--20161230.png
│   ├── HS300与MontoCarlo投资组合收益比较：20170103--20170630.png
│   ├── HS300与MontoCarlo投资组合收益比较：20170703--20171229.png
│   ├── HS300与MontoCarlo投资组合收益比较：20180102--20180629.png
│   ├── HS300与MontoCarlo投资组合收益比较：20180702--20181228.png
│   ├── HS300与MontoCarlo投资组合收益比较：20190102--20190628.png
│   ├── HS300与MontoCarlo投资组合收益比较：20190701--20191230.png
│   ├── Montacarlo_CAL_50000_20100104_20141231.png
│   ├── Montacarlo_CAL_50000_20100701_20150630.png
│   ├── Montacarlo_CAL_50000_20110104_20151231.png
│   ├── Montacarlo_CAL_50000_20110701_20160630.png
│   ├── Montacarlo_CAL_50000_20120104_20161230.png
│   ├── Montacarlo_CAL_50000_20120702_20170630.png
│   ├── Montacarlo_CAL_50000_20130104_20171229.png
│   ├── Montacarlo_CAL_50000_20130701_20180629.png
│   ├── Montacarlo_CAL_50000_20140102_20181228.png
│   └── Montacarlo_CAL_50000_20140701_20190628.png
├── option_result
│   ├── binarytree_american_put_100_step.txt
│   ├── binarytree_european_put_100_step.txt
│   ├── binarytree_european_put_10_step
│   ├── binarytree_european_put_10_step.pdf
│   ├── binarytree_european_put_10_step.png
│   ├── binarytree_european_put_10_step.txt
│   ├── binarytree_european_put_50_step.txt
│   └── black_scholes_put.txt
├── project_structure.txt
├── __pycache__
│   ├── Binary_Tree.cpython-36.pyc
│   ├── config.cpython-36.pyc
│   ├── draw_tree_picture.cpython-36.pyc
│   └── hw1_1.cpython-36.pyc
├── requirements.txt
└── weights
    ├── weights_Markowitz.pickle
    ├── weights_Markowitz.txt
    ├── weights_MontoCarlo.pickle
    └── weights_MontoCarlo.txt

7 directories, 75 files
</pre></table></code></div></div><p>其中，以下是主要文件：</p><p><strong>config.py</strong> 是三道题都使用的全局变量文件， <strong>HW1.xlsx</strong> 是前两题使用的数据文件，第一题使用 <strong>hw1_1.py</strong> ，第二题使用 <strong>hw1_1.py</strong> 和 <strong>hw1_2.py</strong> ，第三题使用 <strong>hw1_3.py、Binary_Tree.py、draw_tree_picture.py</strong> （后两个用来画二叉树）</p><h2 id="2-环境">2. 环境</h2><div class="language-shell highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>pip <span class="nb">install</span> <span class="nt">-r</span> requirements.txt
</pre></table></code></div></div><p>ubuntu环境下，第三小题使用graphviz需要安装：</p><div class="language-shell highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">sudo </span>apt-get <span class="nb">install </span>graphviz
</pre></table></code></div></div><p>ubuntu 解决matplotlib中文问题参考：<a href="https://www.huuinn.com/archives/533">https://www.huuinn.com/archives/533</a></p><h2 id="3-运行效果">3. 运行效果</h2><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 " data-src="https://ftp.bmp.ovh/imgs/2020/10/ed95b4222be2ee39.gif" alt="运行效果" /></p><h1 id="三第一题hw1_1py">三、第一题（hw1_1.py）</h1><h2 id="1-缺失值填补">1. 缺失值填补：</h2><p>股票有停牌等原因会导致存在缺失值，对此使用停牌前一个交易日数据进行填补，而第32只股票从题目给定日期的第一天就有缺失值，因此在使用从前向后填补方法之后，通过从后向前方式对其填补。</p><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="n">df_raw</span> <span class="o">=</span> <span class="n">df_raw</span><span class="p">.</span><span class="n">fillna</span><span class="p">(</span><span class="n">method</span><span class="o">=</span><span class="s">'ffill'</span><span class="p">)</span>
<span class="c1"># 第32只股票第一天就是空缺值，用向前填补方式
</span><span class="n">df</span> <span class="o">=</span> <span class="n">df_raw</span><span class="p">.</span><span class="n">fillna</span><span class="p">(</span><span class="n">method</span><span class="o">=</span><span class="s">'backfill'</span><span class="p">)</span>
</pre></table></code></div></div><h2 id="2-六个月调整投资组合">2. 六个月调整投资组合：</h2><p>对此两种做法，第一种比较简单使用180天为单位做切片，但与题意符合度较差（180个交易日还是和6个月有区别的，6个月有多少交易日也并非固定）。因此本次作业使用月份，即：20150105–20150630、20150701–20151231等，通过时间处理，找到1月和7月的第个交易日进行切片，详情可见 <code class="language-plaintext highlighter-rouge">get_six_month_map</code> 方法：</p><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="k">def</span> <span class="nf">get_six_month_map</span><span class="p">(</span><span class="n">x_matrix</span><span class="p">):</span>
</pre></table></code></div></div><h2 id="3-计算日收益率及日平均收益用于估计每只股票日期望收益">3. 计算日收益率及日平均收益（用于估计每只股票日期望收益）：</h2><p>计算公式如<span id="jump">公式(1)</span>所示。其中，n代表：每六个月的天数-1，向量 \(\vec{r_{t}}\) 是50维的，每一维度代表一只股票t日收益率</p>\[\vec{r_{t}}=\frac{\vec{P_{t}}-\vec{P_{t-1}}}{\vec{P_{t-1}}}\\\] \[\vec{r}=\frac{1}{n}\sum_{t=1}^{n}\vec{r_{t}} \tag{1}\\\]<p>注：也可使用 \(r_{t}=log(\frac{P_{t}}{P_{t-1}})\) ，两者在 \(r_{t}\) 十分小的是等价无穷小，本次作业使用的是前者，具体可见 <code class="language-plaintext highlighter-rouge">day_yield_compute</code> 和 <code class="language-plaintext highlighter-rouge">ex_vector_compute</code> 方法</p><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="k">def</span> <span class="nf">day_yield_compute</span><span class="p">(</span><span class="n">x_matrix</span><span class="p">):</span>
<span class="k">def</span> <span class="nf">ex_vector_compute</span><span class="p">(</span><span class="n">x_matrix</span><span class="p">):</span>
</pre></table></code></div></div><h2 id="4-协方差矩阵计算">4. 协方差矩阵计算：</h2><p>计算式子如<span id="jump2">公式(2)</span>所示。其中，协方差矩阵采用无偏估计，n代表：每六个月的天数-1，50代表50支股票，具体可见 <code class="language-plaintext highlighter-rouge">ex_matrix_compute</code> 和 <code class="language-plaintext highlighter-rouge">cov_matrix_compute</code> 方法</p>\[\begin{align} \Sigma &amp; = E((X-EX)^T(X-EX)) \\ &amp; = \frac{1}{n-1}((X-EX)^T(X-EX)) \tag{2} \end{align}\] \[(X-EX)_{n\times50}=\begin{pmatrix} x_{1,1}-Ex_{1} &amp; x_{2,1}-Ex_{2} &amp; \cdots &amp; x_{50,1}-Ex_{50}\\ x_{1,2}-Ex_{1} &amp; x_{2,2}-Ex_{2} &amp; \cdots &amp; x_{50,2}-Ex_{50}\\ \vdots &amp; \vdots &amp; \ddots &amp; \vdots\\ x_{1,n}-Ex_{1} &amp; x_{2,n}-Ex_{2} &amp; \cdots &amp; x_{50,n}-Ex_{50}\\ \end{pmatrix}\]<div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="k">def</span> <span class="nf">ex_matrix_compute</span><span class="p">(</span><span class="n">x_matrix</span><span class="p">,</span> <span class="n">ex_numpy_vector</span><span class="p">):</span>
<span class="k">def</span> <span class="nf">cov_matrix_compute</span><span class="p">(</span><span class="n">x_ex_matrix</span><span class="p">):</span>
</pre></table></code></div></div><h2 id="5-计算权重">5. 计算权重：</h2><p>计算权重有三种方法，相关权重全部都以 <em><u>txt</u></em> 和 <em><u>pickle</u></em> 两种格式保存在了 <strong>weights</strong> 文件夹中，以下展示Markowitz方法的第一期权重值：</p><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre><td class="rouge-code"><pre><span class="p">[</span><span class="o">-</span><span class="mf">2.02568126e-02</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.38108078e-02</span><span class="p">,</span>  <span class="mf">5.55970704e-03</span><span class="p">,</span> <span class="o">-</span><span class="mf">3.58866925e-02</span><span class="p">,</span>
        <span class="mf">3.86067279e-02</span><span class="p">,</span>  <span class="mf">1.16323980e-01</span><span class="p">,</span>  <span class="mf">1.37263795e-01</span><span class="p">,</span>  <span class="mf">3.62936151e-02</span><span class="p">,</span>
        <span class="mf">8.87808623e-04</span><span class="p">,</span>  <span class="mf">5.30490470e-02</span><span class="p">,</span> <span class="o">-</span><span class="mf">3.76936523e-02</span><span class="p">,</span>  <span class="mf">2.09016878e-02</span><span class="p">,</span>
       <span class="o">-</span><span class="mf">2.59852855e-02</span><span class="p">,</span> <span class="o">-</span><span class="mf">9.22626661e-03</span><span class="p">,</span> <span class="o">-</span><span class="mf">5.17699372e-02</span><span class="p">,</span> <span class="o">-</span><span class="mf">2.23733266e-02</span><span class="p">,</span>
       <span class="o">-</span><span class="mf">8.95150083e-02</span><span class="p">,</span> <span class="o">-</span><span class="mf">2.04227368e-04</span><span class="p">,</span>  <span class="mf">7.57061094e-02</span><span class="p">,</span> <span class="o">-</span><span class="mf">2.48383110e-02</span><span class="p">,</span>
        <span class="mf">4.81555255e-03</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.36931086e-03</span><span class="p">,</span>  <span class="mf">1.76689396e-01</span><span class="p">,</span>  <span class="mf">6.71820232e-03</span><span class="p">,</span>
       <span class="o">-</span><span class="mf">4.08508405e-02</span><span class="p">,</span> <span class="o">-</span><span class="mf">4.22821580e-02</span><span class="p">,</span>  <span class="mf">5.18201389e-02</span><span class="p">,</span>  <span class="mf">6.33594037e-02</span><span class="p">,</span>
       <span class="o">-</span><span class="mf">3.79909286e-02</span><span class="p">,</span> <span class="o">-</span><span class="mf">7.31253016e-02</span><span class="p">,</span>  <span class="mf">7.69239369e-02</span><span class="p">,</span> <span class="o">-</span><span class="mf">4.50168414e-02</span><span class="p">,</span>
       <span class="o">-</span><span class="mf">2.09913657e-02</span><span class="p">,</span>  <span class="mf">3.91885791e-02</span><span class="p">,</span> <span class="o">-</span><span class="mf">2.16612218e-02</span><span class="p">,</span> <span class="o">-</span><span class="mf">7.02912166e-04</span><span class="p">,</span>
        <span class="mf">3.18577429e-01</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.38971134e-02</span><span class="p">,</span>  <span class="mf">7.30523654e-02</span><span class="p">,</span>  <span class="mf">6.70617328e-02</span><span class="p">,</span>
       <span class="o">-</span><span class="mf">3.20086913e-02</span><span class="p">,</span>  <span class="mf">2.12171342e-02</span><span class="p">,</span>  <span class="mf">3.16190233e-04</span><span class="p">,</span> <span class="o">-</span><span class="mf">9.34385397e-02</span><span class="p">,</span>
        <span class="mf">6.07676988e-02</span><span class="p">,</span> <span class="o">-</span><span class="mf">2.80197963e-02</span><span class="p">,</span>  <span class="mf">2.99263338e-01</span><span class="p">,</span>  <span class="mf">8.57752558e-03</span><span class="p">,</span>
        <span class="mf">6.24068580e-02</span><span class="p">,</span> <span class="o">-</span><span class="mf">3.24326105e-02</span><span class="p">]</span>
</pre></table></code></div></div><p>具体可见 <code class="language-plaintext highlighter-rouge">save_weights_montocarlo</code> 和 <code class="language-plaintext highlighter-rouge">save_weights_markowitz</code> 方法：</p><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="k">def</span> <span class="nf">save_weights_montocarlo</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="k">def</span> <span class="nf">save_weights_markowitz</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</pre></table></code></div></div><h3 id="51-markowitz投资组合方法">5.1 Markowitz投资组合方法</h3><p>由于Markowitz投资组合理论没有用到无风险利率，因此这种方法并不会用到3%的无风险利率，而 \(r_{target}\) 是题中给出的10%期望目标收益，该方法求解如下二次规划问题（题中可以shorting，w可以为负），相关向量和矩阵符号与公式<a href="#jump">(1)</a>、<a href="#jump2">(2)</a>一致。可通过 <strong>cvxpy</strong> 或 <strong>cvxopt</strong> 两个包实现求解，具体可见 <code class="language-plaintext highlighter-rouge">compute_weight</code> 方法：</p>\[\begin{alignat*}{2} \min_{\vec{w}} \quad &amp; \frac{1}{2}\vec{w}^T \Sigma \vec{w} \\ \mbox{s.t.}\quad &amp;\vec{w}^T\vec{r} = r_{target} \\ &amp;\vec{1}^T\vec{w} = 1 \end{alignat*}\]<div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="k">def</span> <span class="nf">compute_weight</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x_matrix</span><span class="p">,</span> <span class="n">total_days</span><span class="o">=</span><span class="mi">252</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s">"Markowitz"</span><span class="p">,</span> <span class="n">starttime</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">endtime</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
</pre></table></code></div></div><p>该策略与HS300表现比较（仅以第一期20150105–20150630和总投资期20150105–20191230为例，更多结果请见 <strong>images</strong> 文件夹）：</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 " data-src="https://ftp.bmp.ovh/imgs/2020/10/dda343f42d802ae1.png" alt="HS300与Markowitz投资组合收益比较：20150105--20150630" /></p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 " data-src="https://ftp.bmp.ovh/imgs/2020/10/74fa96e2d1b66728.png" alt="HS300与Markowitz投资组合收益比较：20150105--20150630" /></p><p>从图中可看出，日收益率来看，Markowitz投资组合方法与HS300差不多，但是从2015-2019时间跨度看，日收益率波动情况，橙色portfolio线基本都在蓝色线hs300内部，也就是说Markowitz投资组合方法确实降低了投资组合风险。</p><p>计算每期平均收益比较如下表，具体可见 <strong>compare</strong> 文件夹，通过表可看到总体HS300胜出</p><div class="table-wrapper"><table><thead><tr><th> <th>开始时间<th>结束时间<th>HS300平均日收益<th>Portfolio平均日收益<th>win<tbody><tr><td> <td>20150105<td>20150630<td>0.00157<td>0.001972<td>Portfolio<tr><td> <td>20150701<td>20151231<td>-0.00126<td>-0.00145<td>HS300<tr><td> <td>20160104<td>20160630<td>-0.00064<td>-0.00058<td>Portfolio<tr><td> <td>20160701<td>20161230<td>0.000496<td>8.93E-05<td>HS300<tr><td> <td>20170103<td>20170630<td>0.000758<td>0.000372<td>HS300<tr><td> <td>20170703<td>20171229<td>0.000929<td>0.000961<td>Portfolio<tr><td> <td>20180102<td>20180629<td>-0.00146<td>-0.00056<td>Portfolio<tr><td> <td>20180702<td>20181228<td>-0.001<td>-0.00035<td>Portfolio<tr><td> <td>20190102<td>20190628<td>0.002513<td>0.000695<td>HS300<tr><td> <td>20190701<td>20191230<td>0.000354<td>-0.00035<td>HS300<tr><td>全部平均：<td>20150105<td>20191230<td>0.000217<td>7.30E-05<td>HS300</table></div><p>来自2020-10-30更新，增加了按照20150105资产价格归一化之后的比较结果：</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 " data-src="https://ftp.bmp.ovh/imgs/2020/10/86e58eb1beb64adf.png" alt="HS300与Markowitz投资组合比较：20150105--20191230" /></p><h3 id="52-monto-carlo方法">5.2 Monto Carlo方法</h3><p>这个方法通过求解下式最优化问题获取权重，由于分母有w的二次项，目前只能通过蒙特卡洛数值方法逼近最优解。具体抽样方法为：从 \(N(1/50,1)\) 中随机抽取49个权重，最后一个权重通过1减去前49个之和得到。</p><p>需要注意的是这里的 \(r_{f_{day}}\) 不再是3%，因为 \(\bar{r_{p}}，\sigma_{p}\) 都是日度单位，此处采用 平均每年天数=5年交易日总天数/5，无风险日利率=3%/平均每年天数。获取最优市场组合权重之后，通过结合无风险日利率制作资本市场线，</p>\[\begin{alignat*}{2} \max_{\vec{w}}\quad &amp; Sharpe\ ratio =tan \theta = \frac{\bar{r_{p}}-r_{f_{day}}}{\sigma_{p}} \\ \mbox{s.t.}\quad &amp;\vec{1}^T\vec{w} = 1 \\ &amp;\bar{r_{p}}=\vec{w}^{T}\vec{r} \\ &amp;\sigma_{p}=\sqrt{\vec{w}^T \Sigma \vec{w}} \end{alignat*}\]<p>相关资本市场线和有效前沿（仅以第一期20100104_20141231为例，更多结果请见 <strong>images</strong> 文件夹）：</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 " data-src="https://ftp.bmp.ovh/imgs/2020/10/5ce2f97faabb3d6f.png" alt="Montacarlo_CAL_50000_20100104_20141231" /></p><p>得到市场组合权重w之后，再通过下式解得无风险资产投资权重 \(\alpha\) ：</p>\[\alpha r_{f_{day}} + (1-\alpha) \bar{r_p} = r_{target_{day}}\]<p>同样地， \(r_{target_{day}}\) 也不能用10%，计算方法同无风险日利率。具体可见 <code class="language-plaintext highlighter-rouge">compute_weight</code> 方法：</p><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="k">def</span> <span class="nf">compute_weight</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x_matrix</span><span class="p">,</span> <span class="n">total_days</span><span class="o">=</span><span class="mi">252</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s">"Markowitz"</span><span class="p">,</span> <span class="n">starttime</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">endtime</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
</pre></table></code></div></div><p>该策略与HS300表现比较（仅以第一期20150105–20150630和总投资期20150105–20191230为例，更多结果请见 <strong>images</strong> 文件夹）：</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 " data-src="https://ftp.bmp.ovh/imgs/2020/10/cd5e68c56af7127b.png" alt="HS300与MontoCarlo投资组合收益比较：20150105--20150630" /></p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 " data-src="https://ftp.bmp.ovh/imgs/2020/10/54f564e40a73d12b.png" alt="HS300与MontoCarlo投资组合收益比较：20150105--20191230" /></p><p>计算每期平均收益比较如下表，具体可见 <strong>compare</strong> 文件夹，通过表可看到整体HS300胜出</p><div class="table-wrapper"><table><thead><tr><th> <th>开始时间<th>结束时间<th>HS300平均日收益<th>Portfolio平均日收益<th>win<tbody><tr><td> <td>20150105<td>20150630<td>0.00157<td>-0.000653946<td>HS300<tr><td> <td>20150701<td>20151231<td>-0.00126<td>-0.000365245<td>Portfolio<tr><td> <td>20160104<td>20160630<td>-0.00064<td>-0.000298277<td>Portfolio<tr><td> <td>20160701<td>20161230<td>0.000496<td>-0.000134006<td>HS300<tr><td> <td>20170103<td>20170630<td>0.000758<td>-7.22E-06<td>HS300<tr><td> <td>20170703<td>20171229<td>0.000929<td>-0.000703249<td>HS300<tr><td> <td>20180102<td>20180629<td>-0.00146<td>0.00038444<td>Portfolio<tr><td> <td>20180702<td>20181228<td>-0.001<td>7.94E-06<td>Portfolio<tr><td> <td>20190102<td>20190628<td>0.002513<td>-0.000139735<td>HS300<tr><td> <td>20190701<td>20191230<td>0.000354<td>5.86E-05<td>HS300<tr><td>全部时间：<td>20150105<td>20191230<td>0.000217<td>-0.000186443<td>HS300</table></div><p>来自2020-10-30更新，增加了按照20150105资产价格归一化之后的比较结果：</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 " data-src="https://ftp.bmp.ovh/imgs/2020/10/a3e8d67479addb65.png" alt="HS300与MontoCarlo投资组合比较：20150105--20191230" /></p><h3 id="53-monto-carlo-alpha-0方法">5.3 Monto Carlo alpha 0方法</h3><p>由于 2. Monto Carlo方法 中 \(\bar{r_{p}}\) 通常接近10%（日收益率10%与\(r_{f_{day}}\)相差较大），\(\alpha\) 数值通常在97%左右（基本全投资无风险资产），因此为了直截了当查看最优市场组合权重表现，这个方法将2中的 \(\alpha\) 直接设为0，即只考虑市场组合，不考虑无风险利率</p><p>该策略与HS300表现比较（仅以第一期20150105–20150630和总投资期20150105–20191230为例，更多结果请见 <strong>images</strong> 文件夹）：</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 " data-src="https://ftp.bmp.ovh/imgs/2020/10/5833e56b5dd993e6.png" alt="HS300与MontoCarlo_alpha0投资组合收益比较：20150105--20150630" /></p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 " data-src="https://ftp.bmp.ovh/imgs/2020/10/9dac71452fda3556.png" alt="HS300与MontoCarlo_alpha0投资组合收益比较：20150105--20191230" /></p><p>计算每期平均收益比较如下表，具体可见 <strong>compare</strong> 文件夹，通过表可看到整体HS300胜出</p><div class="table-wrapper"><table><thead><tr><th> <th>开始时间<th>结束时间<th>HS300平均日收益<th>Portfolio平均日收益<th>win<tbody><tr><td> <td>20150105<td>20150630<td>0.00157<td>-0.02793<td>HS300<tr><td> <td>20150701<td>20151231<td>-0.00126<td>-0.01474<td>HS300<tr><td> <td>20160104<td>20160630<td>-0.00064<td>-0.01711<td>HS300<tr><td> <td>20160701<td>20161230<td>0.000496<td>-0.00942<td>HS300<tr><td> <td>20170103<td>20170630<td>0.000758<td>-0.00493<td>HS300<tr><td> <td>20170703<td>20171229<td>0.000929<td>-0.02424<td>HS300<tr><td> <td>20180102<td>20180629<td>-0.00146<td>0.006716<td>Portfolio<tr><td> <td>20180702<td>20181228<td>-0.001<td>-0.00371<td>HS300<tr><td> <td>20190102<td>20190628<td>0.002513<td>-0.00882<td>HS300<tr><td> <td>20190701<td>20191230<td>0.000354<td>-0.00181<td>HS300<tr><td>全部时间：<td>20150105<td>20191230<td>0.000217<td>-0.01062<td>HS300</table></div><p>来自2020-10-30更新，增加了按照20150105资产价格归一化之后的比较结果：</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 " data-src="https://ftp.bmp.ovh/imgs/2020/10/76ac757ef3910e3d.png" alt="HS300与MontoCarlo_alpha0投资组合比较：20150105--20191230" /></p><h1 id="四第二题hw1_2py">四、第二题（hw1_2.py）</h1><h2 id="1-随机抽样5只股票">1. 随机抽样5只股票</h2><p>使用Dataframe.sample，为保证可重复性使用random_state=1属性（第一小题Monto Carlo那里也设置了随机种子保证可重复性），通过随机种子设置，随机抽到：22 2 49 26 33这五只股票，具体可见 <code class="language-plaintext highlighter-rouge">random_sample_stock</code> 函数</p><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="k">def</span> <span class="nf">random_sample_stock</span><span class="p">():</span>
</pre></table></code></div></div><h2 id="2-计算beta系数">2. 计算Beta系数</h2><p>Beta系数计算公式：</p>\[\beta_i=\frac{\sigma_{i,M}}{\sigma_{M}^2}\]<p>可以看出，计算 \(\beta\) 的要素全在协方差矩阵之中，将HS300加入数据框之后，再利用第一题的协方差矩阵计算方法，直接可求得5只股票同市场组合的协方差阵：</p>\[\Sigma_{5,M}=\begin{pmatrix} \sigma_{1}^2 &amp; \sigma_{1,2} &amp; \cdots &amp; \sigma_{1,M}\\ \sigma_{2,1} &amp; \sigma_{2}^2 &amp; \cdots &amp; \sigma_{2,M}\\ \vdots &amp; \vdots &amp; \ddots &amp; \vdots\\ \sigma_{M,1} &amp; \sigma_{M,2} &amp; \cdots &amp; \sigma_{M}^2\\ \end{pmatrix}\]<p>通过上式很容易发现要求得 \(\beta_i\) ，所有数据都在协方差阵的最后一行（列）</p><p>求得这五只股票beta为</p><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="p">[</span><span class="mf">0.98212886</span> <span class="mf">1.20705893</span> <span class="mf">0.89710279</span> <span class="mf">1.09145141</span> <span class="mf">0.99050688</span><span class="p">]</span>
</pre></table></code></div></div><h2 id="3-alpha显著性判断">3. alpha显著性判断</h2><h3 id="31-alpha检验">3.1 alpha检验</h3><p>alpha 检验有两层含义，既可以用于检验定价模型，也可以用于检验因子或策略是否有显著的超额收益。</p><p>在CAPM条件下，对下式进行OLS回归后检验截距项：</p>\[R_{i,t}=\alpha_{i,t}+\beta_{i}R_{M,t}+\varepsilon_{i,t}\]<p>其中，\(R_{i,t}=r_{i,t}-r_{f_{day}}\) ，\(r_{i,t}\)是<a href="#jump">公式(1)</a>中 \(\vec{r_{t}}\) 的一个维度，\(R_{M,t}=r_{M,t}-r_{f_{day}}\) ，\(r_{M,t}\) 是HS300日收益率，\(\beta_{i}\) 为上面求得的Beta（假设10年内每只股票各自Beta一致）。检验零假设： \(H_{0}\colon \alpha_{i,t}=0\) ，使用样本数量为12145（五只股票，样本期为20100105—20191231，2430天，日收益计算公式20191231日收益率无法获得，因此：12145 = 2430 * 5 - 5），检验结果为：</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
</pre><td class="rouge-code"><pre>                            OLS Regression Results                            
==============================================================================
Dep. Variable:                      y   R-squared:                       0.411
Model:                            OLS   Adj. R-squared:                  0.411
Method:                 Least Squares   F-statistic:                     8487.
Date:                Wed, 21 Oct 2020   Prob (F-statistic):               0.00
Time:                        08:33:12   Log-Likelihood:                 31487.
No. Observations:               12145   AIC:                        -6.297e+04
Df Residuals:                   12143   BIC:                        -6.295e+04
Df Model:                           1                                         
Covariance Type:            nonrobust                                         
==============================================================================
                 coef    std err          t      P&gt;|t|      [0.025      0.975]
------------------------------------------------------------------------------
const         -0.0002      0.000     -1.322      0.186      -0.001       0.000
x1             1.0000      0.011     92.127      0.000       0.979       1.021
==============================================================================
Omnibus:                     5078.263   Durbin-Watson:                   1.928
Prob(Omnibus):                  0.000   Jarque-Bera (JB):          1698553.225
Skew:                          -0.733   Prob(JB):                         0.00
Kurtosis:                      60.917   Cond. No.                         66.1
==============================================================================

Notes:
[1] Standard Errors assume that the covariance matrix of the errors is correctly specified.
</pre></table></code></div></div><p>从结果中可以看出：\(\alpha_{i,t}\) 估计值为-0.0002，P值为0.186&gt;0.05应该无法拒绝原假设，即：\(\alpha_{i,t}\) 并不显著不为零。另外，从自变量前系数和显著性来看，这段时间CAPM模型几乎是完美反映了这几只股票收益率。</p><h3 id="32-grs检验">3.2 GRS检验</h3><p>Reference:</p><blockquote><p>Gibbons, Ross, Shanken, 1989. A test of the efficiency of a given portfolio, Econometrica, 57,1121-1152. &lt;DOI:10.2307/1913625&gt;</p></blockquote><p>由于每只股票 \(\alpha\) 可能有所不同，故统一通过3.1的检验会有不妥，GRS检验通过对一系列股票联合检验。检验股票的联合 \(\alpha\) 为0的原假设是否成立，具体可参考上述文献。</p><p>相关实现参考：<a href="https://fin-library.readthedocs.io/en/latest/statistics.html#statistics">finance_byu</a></p><p>检验结果：</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre><td class="rouge-code"><pre>grsstat: 0.935236087740272
pval: 0.45687218432061016


|           | stock1   | stock2   | stock3   | stock4   | stock5   |
|-----------|----------|----------|----------|----------|----------|
| Intercept | 0.000    | -0.001   | -0.000   | 0.000    | -0.000   |
|           | (0.19)   | (-1.60)  | (-1.47)  | (0.74)   | (-0.40)  |
| Market    | 0.982    | 1.207    | 0.897    | 1.091    | 0.991    |
|           | (40.71)  | (39.28)  | (39.50)  | (51.99)  | (37.48)  |
| Obs       | 2429     | 2429     | 2429     | 2429     | 2429     |
| Rsq       | 0.41     | 0.39     | 0.39     | 0.53     | 0.37     |
</pre></table></code></div></div><p>由P-value得不能推翻原假设，即不能证明联合 \(\alpha\) 显著不为0。</p><h1 id="五第三题hw1_3py">五、第三题（hw1_3.py）</h1><h2 id="1-前提假设">1. 前提假设：</h2><p>第三题给的无风险利率3%是连续复利的无风险利率，否则需要通过 \(log(1+r_f)\) 换算。</p><h2 id="2-二叉树">2. 二叉树</h2><h3 id="21-解释">2.1 解释</h3><p>给定条件：S=30，K=30，\(r\)=3%，\(\sigma\)=35%，t=1，m_steps</p><p>相关解释：</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre>S:当前标的资产价格；
K:期权的执行价格;
r:年化无风险利率；
sigma:标的资产连续复利收益率的标准差；
t:以年表示的时间长度；
m_steps:二叉树的步长。
</pre></table></code></div></div><ol><li>计算u，d，P：</li></ol>\[\Delta t=t/m\_steps\] \[u=e^{\sigma\sqrt {\Delta t}},\ d=1/u\] \[P=\frac{e^{r\Delta t}-d}{u-d}\]<ol><li>再通过下式计算最后一期二叉树标的资产价格：</li></ol>\[S_{d^m}=S * d^{m\_steps}\] \[S_{d^{m-1}u}=S_{d^m} * u^2\] \[S_{d^{m-2}u^2}=S_{d^{m-1}u} * u^2\] \[\cdots\]<ol><li>通过与执行价格K比较计算最后一期期权价值：（例如看涨期权）</li></ol>\[f_{d^m}=max(S_{d^m}-K,0)\] \[f_{d^{m-1}u}=max(S_{d^{m-1}u}-K,0)\] \[\cdots\]<ol><li>最终通过下式一步步往前推的第一期</li></ol>\[f_{d^{m-1}}=e^{-r\Delta t}((1-P)f_{d^m}+Pf_{d^{m-1}u})\] \[\cdots\]<p><strong>美式看跌期权在上一步增加一个比较环节：</strong></p>\[\hat{f_{d^{m-1}}}=e^{-r\Delta t}((1-P)f_{d^m}+Pf_{d^{m-1}u})\] \[S_{d^{m-1}}=S_{d^{m-1}u} * d\] \[f_{d^{m-1}}=max(\hat{f_{d^{m-1}}},S_{d^{m-1}}-K)\] \[\cdots\]<h3 id="22-计算结果">2.2 计算结果</h3><p><strong>美式看跌100步：</strong> Option price: 3.7557436745895885</p><p><strong>欧式看跌100步：</strong> Option price: 3.667340740092775</p><p><strong>欧式看跌50步：</strong> Option price: 3.6570804703496114</p><p><strong>欧式看跌10步：</strong> Option price: 3.5760697183104884</p><p>代码详情可见 <code class="language-plaintext highlighter-rouge">hw1_3.py</code> ，结果详情可见 <strong>option_result</strong> 文件夹，该文件夹中有每一步的股票价格和期权价值，在步数小的情况下（其实最好5步以内）可以做出二叉树图，下面仅展示 <strong>欧式看跌10步</strong> 中间结果：</p><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="p">[[(</span><span class="mf">30.0</span><span class="p">,</span> <span class="mf">3.58</span><span class="p">)],</span> <span class="p">[(</span><span class="mf">26.86</span><span class="p">,</span> <span class="mf">4.88</span><span class="p">),</span> <span class="p">(</span><span class="mf">33.51</span><span class="p">,</span> <span class="mf">2.22</span><span class="p">)],</span> <span class="p">[(</span><span class="mf">26.86</span><span class="p">,</span> <span class="mf">4.88</span><span class="p">),</span> <span class="p">(</span><span class="mf">30.0</span><span class="p">,</span> <span class="mf">3.23</span><span class="p">)],</span> <span class="p">[(</span><span class="mf">24.04</span><span class="p">,</span> <span class="mf">6.47</span><span class="p">),</span> <span class="p">(</span><span class="mf">30.0</span><span class="p">,</span> <span class="mf">3.23</span><span class="p">),</span> <span class="p">(</span><span class="mf">37.43</span><span class="p">,</span> <span class="mf">1.17</span><span class="p">)],</span> <span class="p">[(</span><span class="mf">24.04</span><span class="p">,</span> <span class="mf">6.47</span><span class="p">),</span> <span class="p">(</span><span class="mf">30.0</span><span class="p">,</span> <span class="mf">3.23</span><span class="p">),</span> <span class="p">(</span><span class="mf">33.51</span><span class="p">,</span> <span class="mf">1.83</span><span class="p">)],</span> <span class="p">[(</span><span class="mf">24.04</span><span class="p">,</span> <span class="mf">6.47</span><span class="p">),</span> <span class="p">(</span><span class="mf">26.86</span><span class="p">,</span> <span class="mf">4.57</span><span class="p">),</span> <span class="p">(</span><span class="mf">33.51</span><span class="p">,</span> <span class="mf">1.83</span><span class="p">)],</span> <span class="p">[(</span><span class="mf">21.52</span><span class="p">,</span> <span class="mf">8.3</span><span class="p">),</span> <span class="p">(</span><span class="mf">26.86</span><span class="p">,</span> <span class="mf">4.57</span><span class="p">),</span> <span class="p">(</span><span class="mf">33.51</span><span class="p">,</span> <span class="mf">1.83</span><span class="p">),</span> <span class="p">(</span><span class="mf">41.81</span><span class="p">,</span> <span class="mf">0.47</span><span class="p">)],</span> <span class="p">[(</span><span class="mf">21.52</span><span class="p">,</span> <span class="mf">8.3</span><span class="p">),</span> <span class="p">(</span><span class="mf">26.86</span><span class="p">,</span> <span class="mf">4.57</span><span class="p">),</span> <span class="p">(</span><span class="mf">33.51</span><span class="p">,</span> <span class="mf">1.83</span><span class="p">),</span> <span class="p">(</span><span class="mf">37.43</span><span class="p">,</span> <span class="mf">0.81</span><span class="p">)],</span> <span class="p">[(</span><span class="mf">21.52</span><span class="p">,</span> <span class="mf">8.3</span><span class="p">),</span> <span class="p">(</span><span class="mf">26.86</span><span class="p">,</span> <span class="mf">4.57</span><span class="p">),</span> <span class="p">(</span><span class="mf">30.0</span><span class="p">,</span> <span class="mf">2.81</span><span class="p">),</span> <span class="p">(</span><span class="mf">37.43</span><span class="p">,</span> <span class="mf">0.81</span><span class="p">)],</span> <span class="p">[(</span><span class="mf">21.52</span><span class="p">,</span> <span class="mf">8.3</span><span class="p">),</span> <span class="p">(</span><span class="mf">24.04</span><span class="p">,</span> <span class="mf">6.25</span><span class="p">),</span> <span class="p">(</span><span class="mf">30.0</span><span class="p">,</span> <span class="mf">2.81</span><span class="p">),</span> <span class="p">(</span><span class="mf">37.43</span><span class="p">,</span> <span class="mf">0.81</span><span class="p">)],</span> <span class="p">[(</span><span class="mf">19.27</span><span class="p">,</span> <span class="mf">10.29</span><span class="p">),</span> <span class="p">(</span><span class="mf">24.04</span><span class="p">,</span> <span class="mf">6.25</span><span class="p">),</span> <span class="p">(</span><span class="mf">30.0</span><span class="p">,</span> <span class="mf">2.81</span><span class="p">),</span> <span class="p">(</span><span class="mf">37.43</span><span class="p">,</span> <span class="mf">0.81</span><span class="p">),</span> <span class="p">(</span><span class="mf">46.71</span><span class="p">,</span> <span class="mf">0.11</span><span class="p">)],</span> <span class="p">[(</span><span class="mf">19.27</span><span class="p">,</span> <span class="mf">10.29</span><span class="p">),</span> <span class="p">(</span><span class="mf">24.04</span><span class="p">,</span> <span class="mf">6.25</span><span class="p">),</span> <span class="p">(</span><span class="mf">30.0</span><span class="p">,</span> <span class="mf">2.81</span><span class="p">),</span> <span class="p">(</span><span class="mf">37.43</span><span class="p">,</span> <span class="mf">0.81</span><span class="p">),</span> <span class="p">(</span><span class="mf">41.81</span><span class="p">,</span> <span class="mf">0.21</span><span class="p">)],</span> <span class="p">[(</span><span class="mf">19.27</span><span class="p">,</span> <span class="mf">10.29</span><span class="p">),</span> <span class="p">(</span><span class="mf">24.04</span><span class="p">,</span> <span class="mf">6.25</span><span class="p">),</span> <span class="p">(</span><span class="mf">30.0</span><span class="p">,</span> <span class="mf">2.81</span><span class="p">),</span> <span class="p">(</span><span class="mf">33.51</span><span class="p">,</span> <span class="mf">1.38</span><span class="p">),</span> <span class="p">(</span><span class="mf">41.81</span><span class="p">,</span> <span class="mf">0.21</span><span class="p">)],</span> <span class="p">[(</span><span class="mf">19.27</span><span class="p">,</span> <span class="mf">10.29</span><span class="p">),</span> <span class="p">(</span><span class="mf">24.04</span><span class="p">,</span> <span class="mf">6.25</span><span class="p">),</span> <span class="p">(</span><span class="mf">26.86</span><span class="p">,</span> <span class="mf">4.19</span><span class="p">),</span> <span class="p">(</span><span class="mf">33.51</span><span class="p">,</span> <span class="mf">1.38</span><span class="p">),</span> <span class="p">(</span><span class="mf">41.81</span><span class="p">,</span> <span class="mf">0.21</span><span class="p">)],</span> <span class="p">[(</span><span class="mf">19.27</span><span class="p">,</span> <span class="mf">10.29</span><span class="p">),</span> <span class="p">(</span><span class="mf">21.52</span><span class="p">,</span> <span class="mf">8.23</span><span class="p">),</span> <span class="p">(</span><span class="mf">26.86</span><span class="p">,</span> <span class="mf">4.19</span><span class="p">),</span> <span class="p">(</span><span class="mf">33.51</span><span class="p">,</span> <span class="mf">1.38</span><span class="p">),</span> <span class="p">(</span><span class="mf">41.81</span><span class="p">,</span> <span class="mf">0.21</span><span class="p">)],</span> <span class="p">[(</span><span class="mf">17.25</span><span class="p">,</span> <span class="mf">12.3</span><span class="p">),</span> <span class="p">(</span><span class="mf">21.52</span><span class="p">,</span> <span class="mf">8.23</span><span class="p">),</span> <span class="p">(</span><span class="mf">26.86</span><span class="p">,</span> <span class="mf">4.19</span><span class="p">),</span> <span class="p">(</span><span class="mf">33.51</span><span class="p">,</span> <span class="mf">1.38</span><span class="p">),</span> <span class="p">(</span><span class="mf">41.81</span><span class="p">,</span> <span class="mf">0.21</span><span class="p">),</span> <span class="p">(</span><span class="mf">52.17</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)],</span> <span class="p">[(</span><span class="mf">17.25</span><span class="p">,</span> <span class="mf">12.3</span><span class="p">),</span> <span class="p">(</span><span class="mf">21.52</span><span class="p">,</span> <span class="mf">8.23</span><span class="p">),</span> <span class="p">(</span><span class="mf">26.86</span><span class="p">,</span> <span class="mf">4.19</span><span class="p">),</span> <span class="p">(</span><span class="mf">33.51</span><span class="p">,</span> <span class="mf">1.38</span><span class="p">),</span> <span class="p">(</span><span class="mf">41.81</span><span class="p">,</span> <span class="mf">0.21</span><span class="p">),</span> <span class="p">(</span><span class="mf">46.71</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)],</span> <span class="p">[(</span><span class="mf">17.25</span><span class="p">,</span> <span class="mf">12.3</span><span class="p">),</span> <span class="p">(</span><span class="mf">21.52</span><span class="p">,</span> <span class="mf">8.23</span><span class="p">),</span> <span class="p">(</span><span class="mf">26.86</span><span class="p">,</span> <span class="mf">4.19</span><span class="p">),</span> <span class="p">(</span><span class="mf">33.51</span><span class="p">,</span> <span class="mf">1.38</span><span class="p">),</span> <span class="p">(</span><span class="mf">37.43</span><span class="p">,</span> <span class="mf">0.41</span><span class="p">),</span> <span class="p">(</span><span class="mf">46.71</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)],</span> <span class="p">[(</span><span class="mf">17.25</span><span class="p">,</span> <span class="mf">12.3</span><span class="p">),</span> <span class="p">(</span><span class="mf">21.52</span><span class="p">,</span> <span class="mf">8.23</span><span class="p">),</span> <span class="p">(</span><span class="mf">26.86</span><span class="p">,</span> <span class="mf">4.19</span><span class="p">),</span> <span class="p">(</span><span class="mf">30.0</span><span class="p">,</span> <span class="mf">2.3</span><span class="p">),</span> <span class="p">(</span><span class="mf">37.43</span><span class="p">,</span> <span class="mf">0.41</span><span class="p">),</span> <span class="p">(</span><span class="mf">46.71</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)],</span> <span class="p">[(</span><span class="mf">17.25</span><span class="p">,</span> <span class="mf">12.3</span><span class="p">),</span> <span class="p">(</span><span class="mf">21.52</span><span class="p">,</span> <span class="mf">8.23</span><span class="p">),</span> <span class="p">(</span><span class="mf">24.04</span><span class="p">,</span> <span class="mf">6.01</span><span class="p">),</span> <span class="p">(</span><span class="mf">30.0</span><span class="p">,</span> <span class="mf">2.3</span><span class="p">),</span> <span class="p">(</span><span class="mf">37.43</span><span class="p">,</span> <span class="mf">0.41</span><span class="p">),</span> <span class="p">(</span><span class="mf">46.71</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)],</span> <span class="p">[(</span><span class="mf">17.25</span><span class="p">,</span> <span class="mf">12.3</span><span class="p">),</span> <span class="p">(</span><span class="mf">19.27</span><span class="p">,</span> <span class="mf">10.37</span><span class="p">),</span> <span class="p">(</span><span class="mf">24.04</span><span class="p">,</span> <span class="mf">6.01</span><span class="p">),</span> <span class="p">(</span><span class="mf">30.0</span><span class="p">,</span> <span class="mf">2.3</span><span class="p">),</span> <span class="p">(</span><span class="mf">37.43</span><span class="p">,</span> <span class="mf">0.41</span><span class="p">),</span> <span class="p">(</span><span class="mf">46.71</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)],</span> <span class="p">[(</span><span class="mf">15.44</span><span class="p">,</span> <span class="mf">14.2</span><span class="p">),</span> <span class="p">(</span><span class="mf">19.27</span><span class="p">,</span> <span class="mf">10.37</span><span class="p">),</span> <span class="p">(</span><span class="mf">24.04</span><span class="p">,</span> <span class="mf">6.01</span><span class="p">),</span> <span class="p">(</span><span class="mf">30.0</span><span class="p">,</span> <span class="mf">2.3</span><span class="p">),</span> <span class="p">(</span><span class="mf">37.43</span><span class="p">,</span> <span class="mf">0.41</span><span class="p">),</span> <span class="p">(</span><span class="mf">46.71</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">58.28</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)],</span> <span class="p">[(</span><span class="mf">15.44</span><span class="p">,</span> <span class="mf">14.2</span><span class="p">),</span> <span class="p">(</span><span class="mf">19.27</span><span class="p">,</span> <span class="mf">10.37</span><span class="p">),</span> <span class="p">(</span><span class="mf">24.04</span><span class="p">,</span> <span class="mf">6.01</span><span class="p">),</span> <span class="p">(</span><span class="mf">30.0</span><span class="p">,</span> <span class="mf">2.3</span><span class="p">),</span> <span class="p">(</span><span class="mf">37.43</span><span class="p">,</span> <span class="mf">0.41</span><span class="p">),</span> <span class="p">(</span><span class="mf">46.71</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">52.17</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)],</span> <span class="p">[(</span><span class="mf">15.44</span><span class="p">,</span> <span class="mf">14.2</span><span class="p">),</span> <span class="p">(</span><span class="mf">19.27</span><span class="p">,</span> <span class="mf">10.37</span><span class="p">),</span> <span class="p">(</span><span class="mf">24.04</span><span class="p">,</span> <span class="mf">6.01</span><span class="p">),</span> <span class="p">(</span><span class="mf">30.0</span><span class="p">,</span> <span class="mf">2.3</span><span class="p">),</span> <span class="p">(</span><span class="mf">37.43</span><span class="p">,</span> <span class="mf">0.41</span><span class="p">),</span> <span class="p">(</span><span class="mf">41.81</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">52.17</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)],</span> <span class="p">[(</span><span class="mf">15.44</span><span class="p">,</span> <span class="mf">14.2</span><span class="p">),</span> <span class="p">(</span><span class="mf">19.27</span><span class="p">,</span> <span class="mf">10.37</span><span class="p">),</span> <span class="p">(</span><span class="mf">24.04</span><span class="p">,</span> <span class="mf">6.01</span><span class="p">),</span> <span class="p">(</span><span class="mf">30.0</span><span class="p">,</span> <span class="mf">2.3</span><span class="p">),</span> <span class="p">(</span><span class="mf">33.51</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">),</span> <span class="p">(</span><span class="mf">41.81</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">52.17</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)],</span> <span class="p">[(</span><span class="mf">15.44</span><span class="p">,</span> <span class="mf">14.2</span><span class="p">),</span> <span class="p">(</span><span class="mf">19.27</span><span class="p">,</span> <span class="mf">10.37</span><span class="p">),</span> <span class="p">(</span><span class="mf">24.04</span><span class="p">,</span> <span class="mf">6.01</span><span class="p">),</span> <span class="p">(</span><span class="mf">26.86</span><span class="p">,</span> <span class="mf">3.72</span><span class="p">),</span> <span class="p">(</span><span class="mf">33.51</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">),</span> <span class="p">(</span><span class="mf">41.81</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">52.17</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)],</span> <span class="p">[(</span><span class="mf">15.44</span><span class="p">,</span> <span class="mf">14.2</span><span class="p">),</span> <span class="p">(</span><span class="mf">19.27</span><span class="p">,</span> <span class="mf">10.37</span><span class="p">),</span> <span class="p">(</span><span class="mf">21.52</span><span class="p">,</span> <span class="mf">8.21</span><span class="p">),</span> <span class="p">(</span><span class="mf">26.86</span><span class="p">,</span> <span class="mf">3.72</span><span class="p">),</span> <span class="p">(</span><span class="mf">33.51</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">),</span> <span class="p">(</span><span class="mf">41.81</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">52.17</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)],</span> <span class="p">[(</span><span class="mf">15.44</span><span class="p">,</span> <span class="mf">14.2</span><span class="p">),</span> <span class="p">(</span><span class="mf">17.25</span><span class="p">,</span> <span class="mf">12.48</span><span class="p">),</span> <span class="p">(</span><span class="mf">21.52</span><span class="p">,</span> <span class="mf">8.21</span><span class="p">),</span> <span class="p">(</span><span class="mf">26.86</span><span class="p">,</span> <span class="mf">3.72</span><span class="p">),</span> <span class="p">(</span><span class="mf">33.51</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">),</span> <span class="p">(</span><span class="mf">41.81</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">52.17</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)],</span> <span class="p">[(</span><span class="mf">13.82</span><span class="p">,</span> <span class="mf">15.91</span><span class="p">),</span> <span class="p">(</span><span class="mf">17.25</span><span class="p">,</span> <span class="mf">12.48</span><span class="p">),</span> <span class="p">(</span><span class="mf">21.52</span><span class="p">,</span> <span class="mf">8.21</span><span class="p">),</span> <span class="p">(</span><span class="mf">26.86</span><span class="p">,</span> <span class="mf">3.72</span><span class="p">),</span> <span class="p">(</span><span class="mf">33.51</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">),</span> <span class="p">(</span><span class="mf">41.81</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">52.17</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">65.1</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)],</span> <span class="p">[(</span><span class="mf">13.82</span><span class="p">,</span> <span class="mf">15.91</span><span class="p">),</span> <span class="p">(</span><span class="mf">17.25</span><span class="p">,</span> <span class="mf">12.48</span><span class="p">),</span> <span class="p">(</span><span class="mf">21.52</span><span class="p">,</span> <span class="mf">8.21</span><span class="p">),</span> <span class="p">(</span><span class="mf">26.86</span><span class="p">,</span> <span class="mf">3.72</span><span class="p">),</span> <span class="p">(</span><span class="mf">33.51</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">),</span> <span class="p">(</span><span class="mf">41.81</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">52.17</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">58.28</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)],</span> <span class="p">[(</span><span class="mf">13.82</span><span class="p">,</span> <span class="mf">15.91</span><span class="p">),</span> <span class="p">(</span><span class="mf">17.25</span><span class="p">,</span> <span class="mf">12.48</span><span class="p">),</span> <span class="p">(</span><span class="mf">21.52</span><span class="p">,</span> <span class="mf">8.21</span><span class="p">),</span> <span class="p">(</span><span class="mf">26.86</span><span class="p">,</span> <span class="mf">3.72</span><span class="p">),</span> <span class="p">(</span><span class="mf">33.51</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">),</span> <span class="p">(</span><span class="mf">41.81</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">46.71</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">58.28</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)],</span> <span class="p">[(</span><span class="mf">13.82</span><span class="p">,</span> <span class="mf">15.91</span><span class="p">),</span> <span class="p">(</span><span class="mf">17.25</span><span class="p">,</span> <span class="mf">12.48</span><span class="p">),</span> <span class="p">(</span><span class="mf">21.52</span><span class="p">,</span> <span class="mf">8.21</span><span class="p">),</span> <span class="p">(</span><span class="mf">26.86</span><span class="p">,</span> <span class="mf">3.72</span><span class="p">),</span> <span class="p">(</span><span class="mf">33.51</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">),</span> <span class="p">(</span><span class="mf">37.43</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">46.71</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">58.28</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)],</span> <span class="p">[(</span><span class="mf">13.82</span><span class="p">,</span> <span class="mf">15.91</span><span class="p">),</span> <span class="p">(</span><span class="mf">17.25</span><span class="p">,</span> <span class="mf">12.48</span><span class="p">),</span> <span class="p">(</span><span class="mf">21.52</span><span class="p">,</span> <span class="mf">8.21</span><span class="p">),</span> <span class="p">(</span><span class="mf">26.86</span><span class="p">,</span> <span class="mf">3.72</span><span class="p">),</span> <span class="p">(</span><span class="mf">30.0</span><span class="p">,</span> <span class="mf">1.57</span><span class="p">),</span> <span class="p">(</span><span class="mf">37.43</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">46.71</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">58.28</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)],</span> <span class="p">[(</span><span class="mf">13.82</span><span class="p">,</span> <span class="mf">15.91</span><span class="p">),</span> <span class="p">(</span><span class="mf">17.25</span><span class="p">,</span> <span class="mf">12.48</span><span class="p">),</span> <span class="p">(</span><span class="mf">21.52</span><span class="p">,</span> <span class="mf">8.21</span><span class="p">),</span> <span class="p">(</span><span class="mf">24.04</span><span class="p">,</span> <span class="mf">5.78</span><span class="p">),</span> <span class="p">(</span><span class="mf">30.0</span><span class="p">,</span> <span class="mf">1.57</span><span class="p">),</span> <span class="p">(</span><span class="mf">37.43</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">46.71</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">58.28</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)],</span> <span class="p">[(</span><span class="mf">13.82</span><span class="p">,</span> <span class="mf">15.91</span><span class="p">),</span> <span class="p">(</span><span class="mf">17.25</span><span class="p">,</span> <span class="mf">12.48</span><span class="p">),</span> <span class="p">(</span><span class="mf">19.27</span><span class="p">,</span> <span class="mf">10.55</span><span class="p">),</span> <span class="p">(</span><span class="mf">24.04</span><span class="p">,</span> <span class="mf">5.78</span><span class="p">),</span> <span class="p">(</span><span class="mf">30.0</span><span class="p">,</span> <span class="mf">1.57</span><span class="p">),</span> <span class="p">(</span><span class="mf">37.43</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">46.71</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">58.28</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)],</span> <span class="p">[(</span><span class="mf">13.82</span><span class="p">,</span> <span class="mf">15.91</span><span class="p">),</span> <span class="p">(</span><span class="mf">15.44</span><span class="p">,</span> <span class="mf">14.38</span><span class="p">),</span> <span class="p">(</span><span class="mf">19.27</span><span class="p">,</span> <span class="mf">10.55</span><span class="p">),</span> <span class="p">(</span><span class="mf">24.04</span><span class="p">,</span> <span class="mf">5.78</span><span class="p">),</span> <span class="p">(</span><span class="mf">30.0</span><span class="p">,</span> <span class="mf">1.57</span><span class="p">),</span> <span class="p">(</span><span class="mf">37.43</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">46.71</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">58.28</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)],</span> <span class="p">[(</span><span class="mf">12.38</span><span class="p">,</span> <span class="mf">17.44</span><span class="p">),</span> <span class="p">(</span><span class="mf">15.44</span><span class="p">,</span> <span class="mf">14.38</span><span class="p">),</span> <span class="p">(</span><span class="mf">19.27</span><span class="p">,</span> <span class="mf">10.55</span><span class="p">),</span> <span class="p">(</span><span class="mf">24.04</span><span class="p">,</span> <span class="mf">5.78</span><span class="p">),</span> <span class="p">(</span><span class="mf">30.0</span><span class="p">,</span> <span class="mf">1.57</span><span class="p">),</span> <span class="p">(</span><span class="mf">37.43</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">46.71</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">58.28</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">72.72</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)],</span> <span class="p">[(</span><span class="mf">12.38</span><span class="p">,</span> <span class="mf">17.44</span><span class="p">),</span> <span class="p">(</span><span class="mf">15.44</span><span class="p">,</span> <span class="mf">14.38</span><span class="p">),</span> <span class="p">(</span><span class="mf">19.27</span><span class="p">,</span> <span class="mf">10.55</span><span class="p">),</span> <span class="p">(</span><span class="mf">24.04</span><span class="p">,</span> <span class="mf">5.78</span><span class="p">),</span> <span class="p">(</span><span class="mf">30.0</span><span class="p">,</span> <span class="mf">1.57</span><span class="p">),</span> <span class="p">(</span><span class="mf">37.43</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">46.71</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">58.28</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">65.1</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)],</span> <span class="p">[(</span><span class="mf">12.38</span><span class="p">,</span> <span class="mf">17.44</span><span class="p">),</span> <span class="p">(</span><span class="mf">15.44</span><span class="p">,</span> <span class="mf">14.38</span><span class="p">),</span> <span class="p">(</span><span class="mf">19.27</span><span class="p">,</span> <span class="mf">10.55</span><span class="p">),</span> <span class="p">(</span><span class="mf">24.04</span><span class="p">,</span> <span class="mf">5.78</span><span class="p">),</span> <span class="p">(</span><span class="mf">30.0</span><span class="p">,</span> <span class="mf">1.57</span><span class="p">),</span> <span class="p">(</span><span class="mf">37.43</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">46.71</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">52.17</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">65.1</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)],</span> <span class="p">[(</span><span class="mf">12.38</span><span class="p">,</span> <span class="mf">17.44</span><span class="p">),</span> <span class="p">(</span><span class="mf">15.44</span><span class="p">,</span> <span class="mf">14.38</span><span class="p">),</span> <span class="p">(</span><span class="mf">19.27</span><span class="p">,</span> <span class="mf">10.55</span><span class="p">),</span> <span class="p">(</span><span class="mf">24.04</span><span class="p">,</span> <span class="mf">5.78</span><span class="p">),</span> <span class="p">(</span><span class="mf">30.0</span><span class="p">,</span> <span class="mf">1.57</span><span class="p">),</span> <span class="p">(</span><span class="mf">37.43</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">41.81</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">52.17</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">65.1</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)],</span> <span class="p">[(</span><span class="mf">12.38</span><span class="p">,</span> <span class="mf">17.44</span><span class="p">),</span> <span class="p">(</span><span class="mf">15.44</span><span class="p">,</span> <span class="mf">14.38</span><span class="p">),</span> <span class="p">(</span><span class="mf">19.27</span><span class="p">,</span> <span class="mf">10.55</span><span class="p">),</span> <span class="p">(</span><span class="mf">24.04</span><span class="p">,</span> <span class="mf">5.78</span><span class="p">),</span> <span class="p">(</span><span class="mf">30.0</span><span class="p">,</span> <span class="mf">1.57</span><span class="p">),</span> <span class="p">(</span><span class="mf">33.51</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">41.81</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">52.17</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">65.1</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)],</span> <span class="p">[(</span><span class="mf">12.38</span><span class="p">,</span> <span class="mf">17.44</span><span class="p">),</span> <span class="p">(</span><span class="mf">15.44</span><span class="p">,</span> <span class="mf">14.38</span><span class="p">),</span> <span class="p">(</span><span class="mf">19.27</span><span class="p">,</span> <span class="mf">10.55</span><span class="p">),</span> <span class="p">(</span><span class="mf">24.04</span><span class="p">,</span> <span class="mf">5.78</span><span class="p">),</span> <span class="p">(</span><span class="mf">26.86</span><span class="p">,</span> <span class="mf">3.05</span><span class="p">),</span> <span class="p">(</span><span class="mf">33.51</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">41.81</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">52.17</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">65.1</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)],</span> <span class="p">[(</span><span class="mf">12.38</span><span class="p">,</span> <span class="mf">17.44</span><span class="p">),</span> <span class="p">(</span><span class="mf">15.44</span><span class="p">,</span> <span class="mf">14.38</span><span class="p">),</span> <span class="p">(</span><span class="mf">19.27</span><span class="p">,</span> <span class="mf">10.55</span><span class="p">),</span> <span class="p">(</span><span class="mf">21.52</span><span class="p">,</span> <span class="mf">8.39</span><span class="p">),</span> <span class="p">(</span><span class="mf">26.86</span><span class="p">,</span> <span class="mf">3.05</span><span class="p">),</span> <span class="p">(</span><span class="mf">33.51</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">41.81</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">52.17</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">65.1</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)],</span> <span class="p">[(</span><span class="mf">12.38</span><span class="p">,</span> <span class="mf">17.44</span><span class="p">),</span> <span class="p">(</span><span class="mf">15.44</span><span class="p">,</span> <span class="mf">14.38</span><span class="p">),</span> <span class="p">(</span><span class="mf">17.25</span><span class="p">,</span> <span class="mf">12.66</span><span class="p">),</span> <span class="p">(</span><span class="mf">21.52</span><span class="p">,</span> <span class="mf">8.39</span><span class="p">),</span> <span class="p">(</span><span class="mf">26.86</span><span class="p">,</span> <span class="mf">3.05</span><span class="p">),</span> <span class="p">(</span><span class="mf">33.51</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">41.81</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">52.17</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">65.1</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)],</span> <span class="p">[(</span><span class="mf">12.38</span><span class="p">,</span> <span class="mf">17.44</span><span class="p">),</span> <span class="p">(</span><span class="mf">13.82</span><span class="p">,</span> <span class="mf">16.09</span><span class="p">),</span> <span class="p">(</span><span class="mf">17.25</span><span class="p">,</span> <span class="mf">12.66</span><span class="p">),</span> <span class="p">(</span><span class="mf">21.52</span><span class="p">,</span> <span class="mf">8.39</span><span class="p">),</span> <span class="p">(</span><span class="mf">26.86</span><span class="p">,</span> <span class="mf">3.05</span><span class="p">),</span> <span class="p">(</span><span class="mf">33.51</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">41.81</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">52.17</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">65.1</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)],</span> <span class="p">[(</span><span class="mf">11.08</span><span class="p">,</span> <span class="mf">18.83</span><span class="p">),</span> <span class="p">(</span><span class="mf">13.82</span><span class="p">,</span> <span class="mf">16.09</span><span class="p">),</span> <span class="p">(</span><span class="mf">17.25</span><span class="p">,</span> <span class="mf">12.66</span><span class="p">),</span> <span class="p">(</span><span class="mf">21.52</span><span class="p">,</span> <span class="mf">8.39</span><span class="p">),</span> <span class="p">(</span><span class="mf">26.86</span><span class="p">,</span> <span class="mf">3.05</span><span class="p">),</span> <span class="p">(</span><span class="mf">33.51</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">41.81</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">52.17</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">65.1</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">81.23</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)],</span> <span class="p">[(</span><span class="mf">11.08</span><span class="p">,</span> <span class="mf">18.83</span><span class="p">),</span> <span class="p">(</span><span class="mf">13.82</span><span class="p">,</span> <span class="mf">16.09</span><span class="p">),</span> <span class="p">(</span><span class="mf">17.25</span><span class="p">,</span> <span class="mf">12.66</span><span class="p">),</span> <span class="p">(</span><span class="mf">21.52</span><span class="p">,</span> <span class="mf">8.39</span><span class="p">),</span> <span class="p">(</span><span class="mf">26.86</span><span class="p">,</span> <span class="mf">3.05</span><span class="p">),</span> <span class="p">(</span><span class="mf">33.51</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">41.81</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">52.17</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">65.1</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">72.72</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)],</span> <span class="p">[(</span><span class="mf">11.08</span><span class="p">,</span> <span class="mf">18.83</span><span class="p">),</span> <span class="p">(</span><span class="mf">13.82</span><span class="p">,</span> <span class="mf">16.09</span><span class="p">),</span> <span class="p">(</span><span class="mf">17.25</span><span class="p">,</span> <span class="mf">12.66</span><span class="p">),</span> <span class="p">(</span><span class="mf">21.52</span><span class="p">,</span> <span class="mf">8.39</span><span class="p">),</span> <span class="p">(</span><span class="mf">26.86</span><span class="p">,</span> <span class="mf">3.05</span><span class="p">),</span> <span class="p">(</span><span class="mf">33.51</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">41.81</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">52.17</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">58.28</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">72.72</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)],</span> <span class="p">[(</span><span class="mf">11.08</span><span class="p">,</span> <span class="mf">18.83</span><span class="p">),</span> <span class="p">(</span><span class="mf">13.82</span><span class="p">,</span> <span class="mf">16.09</span><span class="p">),</span> <span class="p">(</span><span class="mf">17.25</span><span class="p">,</span> <span class="mf">12.66</span><span class="p">),</span> <span class="p">(</span><span class="mf">21.52</span><span class="p">,</span> <span class="mf">8.39</span><span class="p">),</span> <span class="p">(</span><span class="mf">26.86</span><span class="p">,</span> <span class="mf">3.05</span><span class="p">),</span> <span class="p">(</span><span class="mf">33.51</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">41.81</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">46.71</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">58.28</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">72.72</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)],</span> <span class="p">[(</span><span class="mf">11.08</span><span class="p">,</span> <span class="mf">18.83</span><span class="p">),</span> <span class="p">(</span><span class="mf">13.82</span><span class="p">,</span> <span class="mf">16.09</span><span class="p">),</span> <span class="p">(</span><span class="mf">17.25</span><span class="p">,</span> <span class="mf">12.66</span><span class="p">),</span> <span class="p">(</span><span class="mf">21.52</span><span class="p">,</span> <span class="mf">8.39</span><span class="p">),</span> <span class="p">(</span><span class="mf">26.86</span><span class="p">,</span> <span class="mf">3.05</span><span class="p">),</span> <span class="p">(</span><span class="mf">33.51</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">37.43</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">46.71</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">58.28</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">72.72</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)],</span> <span class="p">[(</span><span class="mf">11.08</span><span class="p">,</span> <span class="mf">18.83</span><span class="p">),</span> <span class="p">(</span><span class="mf">13.82</span><span class="p">,</span> <span class="mf">16.09</span><span class="p">),</span> <span class="p">(</span><span class="mf">17.25</span><span class="p">,</span> <span class="mf">12.66</span><span class="p">),</span> <span class="p">(</span><span class="mf">21.52</span><span class="p">,</span> <span class="mf">8.39</span><span class="p">),</span> <span class="p">(</span><span class="mf">26.86</span><span class="p">,</span> <span class="mf">3.05</span><span class="p">),</span> <span class="p">(</span><span class="mf">30.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">37.43</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">46.71</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">58.28</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">72.72</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)],</span> <span class="p">[(</span><span class="mf">11.08</span><span class="p">,</span> <span class="mf">18.83</span><span class="p">),</span> <span class="p">(</span><span class="mf">13.82</span><span class="p">,</span> <span class="mf">16.09</span><span class="p">),</span> <span class="p">(</span><span class="mf">17.25</span><span class="p">,</span> <span class="mf">12.66</span><span class="p">),</span> <span class="p">(</span><span class="mf">21.52</span><span class="p">,</span> <span class="mf">8.39</span><span class="p">),</span> <span class="p">(</span><span class="mf">24.04</span><span class="p">,</span> <span class="mf">5.96</span><span class="p">),</span> <span class="p">(</span><span class="mf">30.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">37.43</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">46.71</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">58.28</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">72.72</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)],</span> <span class="p">[(</span><span class="mf">11.08</span><span class="p">,</span> <span class="mf">18.83</span><span class="p">),</span> <span class="p">(</span><span class="mf">13.82</span><span class="p">,</span> <span class="mf">16.09</span><span class="p">),</span> <span class="p">(</span><span class="mf">17.25</span><span class="p">,</span> <span class="mf">12.66</span><span class="p">),</span> <span class="p">(</span><span class="mf">19.27</span><span class="p">,</span> <span class="mf">10.73</span><span class="p">),</span> <span class="p">(</span><span class="mf">24.04</span><span class="p">,</span> <span class="mf">5.96</span><span class="p">),</span> <span class="p">(</span><span class="mf">30.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">37.43</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">46.71</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">58.28</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">72.72</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)],</span> <span class="p">[(</span><span class="mf">11.08</span><span class="p">,</span> <span class="mf">18.83</span><span class="p">),</span> <span class="p">(</span><span class="mf">13.82</span><span class="p">,</span> <span class="mf">16.09</span><span class="p">),</span> <span class="p">(</span><span class="mf">15.44</span><span class="p">,</span> <span class="mf">14.56</span><span class="p">),</span> <span class="p">(</span><span class="mf">19.27</span><span class="p">,</span> <span class="mf">10.73</span><span class="p">),</span> <span class="p">(</span><span class="mf">24.04</span><span class="p">,</span> <span class="mf">5.96</span><span class="p">),</span> <span class="p">(</span><span class="mf">30.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">37.43</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">46.71</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">58.28</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">72.72</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)],</span> <span class="p">[(</span><span class="mf">11.08</span><span class="p">,</span> <span class="mf">18.83</span><span class="p">),</span> <span class="p">(</span><span class="mf">12.38</span><span class="p">,</span> <span class="mf">17.62</span><span class="p">),</span> <span class="p">(</span><span class="mf">15.44</span><span class="p">,</span> <span class="mf">14.56</span><span class="p">),</span> <span class="p">(</span><span class="mf">19.27</span><span class="p">,</span> <span class="mf">10.73</span><span class="p">),</span> <span class="p">(</span><span class="mf">24.04</span><span class="p">,</span> <span class="mf">5.96</span><span class="p">),</span> <span class="p">(</span><span class="mf">30.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">37.43</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">46.71</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">58.28</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">72.72</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)],</span> <span class="p">[(</span><span class="mf">9.92</span><span class="p">,</span> <span class="mf">20.08</span><span class="p">),</span> <span class="p">(</span><span class="mf">12.38</span><span class="p">,</span> <span class="mf">17.62</span><span class="p">),</span> <span class="p">(</span><span class="mf">15.44</span><span class="p">,</span> <span class="mf">14.56</span><span class="p">),</span> <span class="p">(</span><span class="mf">19.27</span><span class="p">,</span> <span class="mf">10.73</span><span class="p">),</span> <span class="p">(</span><span class="mf">24.04</span><span class="p">,</span> <span class="mf">5.96</span><span class="p">),</span> <span class="p">(</span><span class="mf">30.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">37.43</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">46.71</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">58.28</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">72.72</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">90.74</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)]]</span>
</pre></table></code></div></div><h2 id="3-black-scholes公式">3. Black Scholes公式</h2><p>参数与二叉树一致（无需m_steps）</p><h3 id="31-公式">3.1 公式</h3>\[CALL=SN(d_1)-Ke^{-rt}N(d_2)\] \[PUT=Ke^{-rt}N(-d_2)-SN(-d_1)\]<p>其中，</p>\[d_1=\frac{ln(S/K)+(r+\sigma^2/2)t}{\sigma t}\] \[d_2=d_1-\sigma t=\frac{ln(S/K)+(r-\sigma^2/2)t}{\sigma t}\] \[N(d)=\frac{1}{\sqrt {2\pi}}\int_{\infty}^de^{-\frac{1}{2}x^2}{\rm d}x\]<h3 id="32-结果">3.2 结果</h3><p><strong>BS公式欧式看跌：</strong> Option price: 3.677627713214079</p><p>可以看出二叉树结果在步数增大时逐步逼近了BS公式结果</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/blogging/'>Blogging</a>, <a href='/categories/finance/'>Finance</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/investment/" class="post-tag no-text-decoration" >Investment</a> <a href="/tags/monto-carlo/" class="post-tag no-text-decoration" >Monto Carlo</a> <a href="/tags/option-pricing/" class="post-tag no-text-decoration" >Option Pricing</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a> by the author.</div><!-- Post sharing snippet v2.1 https://github.com/cotes2020/jekyll-theme-chirpy © 2019 Cotes Chung Published under the MIT License --><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Financial risk management homework 1 - Zhihao HUANG&url=https://huangzhihao1994.github.io//posts/financial-risk-management-hw1/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Financial risk management homework 1 - Zhihao HUANG&u=https://huangzhihao1994.github.io//posts/financial-risk-management-hw1/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=Financial risk management homework 1 - Zhihao HUANG&url=https://huangzhihao1994.github.io//posts/financial-risk-management-hw1/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank"> <i class="fa-fw fab fa-telegram"></i> </a> <a href="http://service.weibo.com/share/share.php?title=Financial risk management homework 1 - Zhihao HUANG&url=https://huangzhihao1994.github.io//posts/financial-risk-management-hw1/" data-toggle="tooltip" data-placement="top" title="Weibo" target="_blank"> <i class="fa-fw fab fa-weibo"></i> </a> <i class="fa-fw fas fa-link small" onclick="copyLink()" data-toggle="tooltip" data-placement="top" title="Copy link"></i> </span></div></div></div></div></div><!-- The Pannel on right side (Desktop views) v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2017-2019 Cotes Chung MIT License --><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"><h3 data-toc-skip>Recent Update</h3><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/financial-risk-management-hw2/">Financial risk management homework 2</a></li><li><a href="/posts/financial-risk-management-hw1/">Financial risk management homework 1</a></li><li><a href="/posts/html-elements/">HTML elements</a></li><li><a href="/posts/write-a-new-post/">Writing a New Post</a></li><li><a href="/posts/text-and-typography/">Text and Typography</a></li></ul></div><div id="access-tags"><h3 data-toc-skip>Trending Tags</h3><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/option-pricing/">Option Pricing</a> <a class="post-tag" href="/tags/monto-carlo/">Monto Carlo</a> <a class="post-tag" href="/tags/writing/">writing</a> <a class="post-tag" href="/tags/typography/">typography</a> <a class="post-tag" href="/tags/pathwise/">pathwise</a> <a class="post-tag" href="/tags/likelihood-ratio/">likelihood ratio</a> <a class="post-tag" href="/tags/getting-started/">getting started</a> <a class="post-tag" href="/tags/favicon/">favicon</a> <a class="post-tag" href="/tags/longstaff-schwartz/">Longstaff Schwartz</a> <a class="post-tag" href="/tags/investment/">Investment</a></div></div></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"> <!-- Recommend the other 3 posts according to the tags and categories of the current post, if the number is not enough, use the other latest posts to supplement. v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2019 Cotes Chung Published under the MIT License --><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/financial-risk-management-hw2/"><div class="card-body"> <!-- Date format snippet v2.4.1 https://github.com/cotes2020/jekyll-theme-chirpy © 2020 Cotes Chung MIT License --> <span class="timeago small" > Nov 30 <i class="unloaded">2020-11-30T13:52:00+08:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Financial risk management homework 2</h3><div class="text-muted small"><p> 相关代码和结果 一、涉及内容 第二次作业涉及： 蒙特卡洛计算亚式期权以及希腊字母计算（第一题）： 样本路径生成、亚式期权定价、置信区间估计、delta、vega使用pathwise method、gamma使用likelihood ratio method计算 Longstaff-Schwartz method 计算美式看跌（第二题）： 样本路径生成、Tsit...</p></div></div></a></div><div class="card"> <a href="/posts/text-and-typography/"><div class="card-body"> <!-- Date format snippet v2.4.1 https://github.com/cotes2020/jekyll-theme-chirpy © 2020 Cotes Chung MIT License --> <span class="timeago small" > Aug 8, 2019 <i class="unloaded">2019-08-08T11:33:00+08:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Text and Typography</h3><div class="text-muted small"><p> This Jekyll template totally compatible with Markdown syntax. Now, let’s have a look at the text and typography. Titles H1 H2 H3 H4 Paragraph I wandered lonely as a cloud That floats on...</p></div></div></a></div><div class="card"> <a href="/posts/write-a-new-post/"><div class="card-body"> <!-- Date format snippet v2.4.1 https://github.com/cotes2020/jekyll-theme-chirpy © 2020 Cotes Chung MIT License --> <span class="timeago small" > Aug 8, 2019 <i class="unloaded">2019-08-08T14:10:00+08:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Writing a New Post</h3><div class="text-muted small"><p> Naming and Path Create a new file named YYYY-MM-DD-TITLE.EXTENSION and put it in the _post/ of the root directory. Please note that the EXTENSION must be one of md and markdown. From v2.4.1, you c...</p></div></div></a></div></div></div><!-- Navigation buttons at the bottom of the post. v2.1 https://github.com/cotes2020/jekyll-theme-chirpy © 2020 Cotes Chung MIT License --><div class="post-navigation d-flex justify-content-between"> <a href="/posts/html-elements/" class="btn btn-outline-primary"><p>HTML elements</p></a> <a href="/posts/financial-risk-management-hw2/" class="btn btn-outline-primary"><p>Financial risk management homework 2</p></a></div></div></div></div><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lozad/dist/lozad.min.js"></script> <script type="text/javascript"> const imgs = document.querySelectorAll('#post-wrapper img'); const observer = lozad(imgs); observer.observe(); </script> <!-- The Footer v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2017-2019 Cotes Chung MIT License --><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2020 <a href="https://twitter.com/Zhihao HUANG">Zhihao HUANG</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy/">Chirpy</a> theme.</p></div></div></footer></div><!-- The Search results v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2017-2019 Cotes Chung MIT License --><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-xl-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4><a class="post-tag" href="/tags/option-pricing/">Option Pricing</a> <a class="post-tag" href="/tags/monto-carlo/">Monto Carlo</a> <a class="post-tag" href="/tags/writing/">writing</a> <a class="post-tag" href="/tags/typography/">typography</a> <a class="post-tag" href="/tags/pathwise/">pathwise</a> <a class="post-tag" href="/tags/likelihood-ratio/">likelihood ratio</a> <a class="post-tag" href="/tags/getting-started/">getting started</a> <a class="post-tag" href="/tags/favicon/">favicon</a> <a class="post-tag" href="/tags/longstaff-schwartz/">Longstaff Schwartz</a> <a class="post-tag" href="/tags/investment/">Investment</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <!-- The GA snippet v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2017-2019 Cotes Chung MIT License --> <script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','https://www.google-analytics.com/analytics.js','ga'); ga('create', 'UA-179092433-1', 'auto'); ga('send', 'pageview'); </script> <!-- Jekyll Simple Search loader v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2017-2019 Cotes Chung MIT License --> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.7.3/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="https://huangzhihao1994.github.io/{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"><div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>{categories}</div><div><i class="fa fa-tag fa-fw"></i>{tags}</div></div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>' }); </script>
