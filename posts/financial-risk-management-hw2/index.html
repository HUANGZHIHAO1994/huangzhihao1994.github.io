<!DOCTYPE html><html lang="en" > <!-- The Head v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2017-2019 Cotes Chung MIT License --><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Financial risk management homework 2 | Zhihao HUANG</title><meta name="generator" content="Jekyll v4.1.1" /><meta property="og:title" content="Financial risk management homework 2" /><meta name="author" content="Zhihao HUANG" /><meta property="og:locale" content="en_US" /><meta name="description" content="黄之豪的个人博客" /><meta property="og:description" content="黄之豪的个人博客" /><link rel="canonical" href="https://huangzhihao1994.github.io//posts/financial-risk-management-hw2/" /><meta property="og:url" content="https://huangzhihao1994.github.io//posts/financial-risk-management-hw2/" /><meta property="og:site_name" content="Zhihao HUANG" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2020-11-30T13:52:00+08:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Financial risk management homework 2" /><meta name="twitter:site" content="@Zhihao HUANG" /><meta name="twitter:creator" content="@Zhihao HUANG" /><meta name="google-site-verification" content="QM6we5c-SoABV8raPyRUt4VqqMBe1n6JTKMI6JZ02xU" /> <script type="application/ld+json"> {"description":"黄之豪的个人博客","@type":"BlogPosting","headline":"Financial risk management homework 2","dateModified":"2020-11-30T13:52:00+08:00","datePublished":"2020-11-30T13:52:00+08:00","url":"https://huangzhihao1994.github.io//posts/financial-risk-management-hw2/","mainEntityOfPage":{"@type":"WebPage","@id":"https://huangzhihao1994.github.io//posts/financial-risk-management-hw2/"},"author":{"@type":"Person","name":"Zhihao HUANG"},"@context":"https://schema.org"}</script> <!-- The Favicons for Web, Android, Microsoft, and iOS (iPhone and iPad) Apps Generated by: https://www.favicon-generator.org/ v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2019 Cotes Chung Published under the MIT license --><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon.png"><link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon-precomposed.png"><link rel="apple-touch-icon" sizes="57x57" href="/assets/img/favicons/apple-icon-57x57.png"><link rel="apple-touch-icon" sizes="60x60" href="/assets/img/favicons/apple-icon-60x60.png"><link rel="apple-touch-icon" sizes="72x72" href="/assets/img/favicons/apple-icon-72x72.png"><link rel="apple-touch-icon" sizes="76x76" href="/assets/img/favicons/apple-icon-76x76.png"><link rel="apple-touch-icon" sizes="114x114" href="/assets/img/favicons/apple-icon-114x114.png"><link rel="apple-touch-icon" sizes="120x120" href="/assets/img/favicons/apple-icon-120x120.png"><link rel="apple-touch-icon" sizes="144x144" href="/assets/img/favicons/apple-icon-144x144.png"><link rel="apple-touch-icon" sizes="152x152" href="/assets/img/favicons/apple-icon-152x152.png"><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-icon-180x180.png"><link rel="icon" type="image/png" sizes="192x192" href="/assets/img/favicons/android-icon-192x192.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="96x96" href="/assets/img/favicons/favicon-96x96.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/manifest.json"><meta name='msapplication-config' content='/assets/img/favicons/browserconfig.xml'><meta name="msapplication-TileColor" content="#ffffff"><meta name="msapplication-TileImage" content="/assets/img/favicons/ms-icon-144x144.png"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="cdn.jsdelivr.net"><link rel="dns-prefetch" href="cdn.jsdelivr.net"><link rel="preload" as="style" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha256-LA89z+k9fjgMKQ/kq4OO2Mrf8VltYml/VES+Rg0fh20=" crossorigin><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha256-LA89z+k9fjgMKQ/kq4OO2Mrf8VltYml/VES+Rg0fh20=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css" integrity="sha256-+N4/V/SbAFiW1MPBCXnfnP9QSN3+Keu+NlB+0ev/YKQ=" crossorigin="anonymous"> <!-- CSS selector for site. Chirpy v2.3 https://github.com/cotes2020/jekyll-theme-chirpy © 2020 Cotes Chung MIT Licensed --><link rel="preload" as="style" href="/assets/css/post.css"><link rel="stylesheet" href="/assets/css/post.css"><link rel="preload" as="script" href="https://cdn.jsdelivr.net/npm/jquery@3.4.1" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"> <script src="https://cdn.jsdelivr.net/npm/jquery@3.4.1" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.15.0,npm/bootstrap@4.0.0/dist/js/bootstrap.min.js" async></script> <!-- JS selector for site. Chirpy v2.3 https://github.com/cotes2020/jekyll-theme-chirpy © 2020 Cotes Chung MIT Licensed --> <script src="/assets/js/post.min.js" async></script> <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js" async></script> <script src="/app.js" defer></script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column"> <!-- The Side Bar v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2017-2019 Cotes Chung MIT License --><div id="nav-wrapper"><div id="profile-wrapper" class="d-flex flex-column"><div id="avatar" class="d-flex justify-content-center"> <a href="/" alt="avatar"> <img src="/assets/img/sample/avatar.jpg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="profile-text mt-3"><div class="site-title"> <a href="/">Zhihao HUANG</a></div><div class="site-subtitle font-italic">阿柴历险记</div></div></div><ul class="nav flex-column"><li class="nav-item d-flex justify-content-center "> <a href="/" class="nav-link d-flex justify-content-center align-items-center w-100"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a></li><li class="nav-item d-flex justify-content-center "> <a href="/tabs/categories/" class="nav-link d-flex justify-content-center align-items-center w-100"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a></li><li class="nav-item d-flex justify-content-center "> <a href="/tabs/tags/" class="nav-link d-flex justify-content-center align-items-center w-100"> <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a></li><li class="nav-item d-flex justify-content-center "> <a href="/tabs/archives/" class="nav-link d-flex justify-content-center align-items-center w-100"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a></li><li class="nav-item d-flex justify-content-center "> <a href="/tabs/about/" class="nav-link d-flex justify-content-center align-items-center w-100"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></li></ul></div><div class="sidebar-bottom d-flex flex-wrap justify-content-around mt-4"> <span id="mode-toggle-wrapper"> <!-- Switch the mode between dark and light. v2.1 https://github.com/cotes2020/jekyll-theme-chirpy © 2020 Cotes Chung MIT License --> <i class="mode-toggle fas fa-sun" dark-mode-invisible></i> <i class="mode-toggle fas fa-moon" light-mode-invisible></i> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } constructor() { if (this.mode != null) { if (this.mode == ModeToggle.DARK_MODE) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } var self = this; /* always follow the system prefers */ this.sysDarkPrefers.addListener(function() { if (self.mode != null) { if (self.mode == ModeToggle.DARK_MODE) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } }); } /* constructor() */ setDark() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_KEY); sessionStorage.removeItem(ModeToggle.MODE_KEY); } get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode == ModeToggle.DARK_MODE; } get isLightkMode() { return this.mode == ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } flipMode() { if (this.hasMode) { if (this.isSysDarkPrefer) { if (this.isLightkMode) { this.clearMode(); } else { this.setLight(); } } else { if (this.isDarkMode) { this.clearMode(); } else { this.setDark(); } } } else { if (this.isSysDarkPrefer) { this.setLight(); } else { this.setDark(); } } } /* flipMode() */ } /* ModeToggle */ let toggle = new ModeToggle(); $(".mode-toggle").click(function() { toggle.flipMode(); }); </script> </span> <span class="icon-border"></span> <a href="https://github.com/HUANGZHIHAO1994" target="_blank"> <i class="fab fa-github-alt"></i> </a> <a href="https://twitter.com/Zhihao HUANG" target="_blank"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:window.open('mailto:' + ['huang_zhihao','163.com'].join('@'))" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" > <i class="fas fa-rss"></i> </a></div></div><!-- The Top Bar v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2017-2019 Cotes Chung MIT License --><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Posts </a> </span> <span>Financial risk management homework 2</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"> <!-- Refactor the HTML structure. --> <!-- Suroundding the markdown table with '<div class="table-wrapper">. and '</div>' --> <!-- Fixed kramdown code highlight rendering: https://github.com/penibelst/jekyll-compress-html/issues/101 https://github.com/penibelst/jekyll-compress-html/issues/71#issuecomment-188144901 --><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>Financial risk management homework 2</h1><div class="post-meta text-muted d-flex flex-column"><div> Posted <!-- Date format snippet v2.4.1 https://github.com/cotes2020/jekyll-theme-chirpy © 2020 Cotes Chung MIT License --> <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Mon, Nov 30, 2020, 1:52 PM +0800" > Nov 30 <i class="unloaded">2020-11-30T13:52:00+08:00</i> </span> by <span class="author"> Zhihao HUANG </span></div><div> Updated <!-- Date format snippet v2.4.1 https://github.com/cotes2020/jekyll-theme-chirpy © 2020 Cotes Chung MIT License --> <span class="timeago lastmod" data-toggle="tooltip" data-placement="bottom" title="Mon, Nov 30, 2020, 9:42 AM +0000" > Nov 30 <i class="unloaded">2020-11-30T17:42:04+08:00</i> </span></div></div><div class="post-content"><div align="left"> <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 " data-src="https://ftp.bmp.ovh/imgs/2020/08/b77a8439ea51e080.jpg" height="50" width="50" /></div><p><a href="https://github.com/HUANGZHIHAO1994/Financial-risk-management/tree/main/fin_risk_hw2">相关代码和结果</a></p><h1 id="一涉及内容">一、涉及内容</h1><p>第二次作业涉及：</p><ul><li><strong>蒙特卡洛计算亚式期权以及希腊字母计算（第一题）：</strong> 样本路径生成、亚式期权定价、置信区间估计、delta、vega使用pathwise method、gamma使用likelihood ratio method计算</li><li><strong>Longstaff-Schwartz method 计算美式看跌（第二题）：</strong> 样本路径生成、Tsitsiklis et al.(1999)方法、动态规划</li></ul><h1 id="二项目结构及相关说明">二、项目结构及相关说明</h1><h2 id="1-结构及说明">1. 结构及说明</h2><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
</pre><td class="rouge-code"><pre>├── config.py
├── hw2_1.py
├── hw2_1.txt
├── hw2_2_compare.txt
├── hw2_2.py
├── hw2_2.txt
├── LSM.py
├── project_structure.txt
├── __pycache__
│   ├── config.cpython-36.pyc
│   └── hw2_1.cpython-36.pyc
├── references
│   ├── LongstaffSchwartzAmericanOptionsLeastSquareMonteCarlo.pdf
│   ├── Tsitsiklis.pdf
│   └── 随机波动率模型下基于精确模拟算法的期权计算理论.pdf
├── Report.pdf
└── requirements.txt

2 directories, 15 files
</pre></table></code></div></div><p>其中，以下是主要文件：</p><p><strong>config.py</strong> 是两道题都使用的全局变量文件，第一题使用 <strong>hw2_1.py</strong> ，第二题使用 <strong>hw2_1.py</strong> 和 <strong>hw2_2.py</strong> 以及与 <strong>LSM.py</strong> 对比</p><h2 id="2-环境">2. 环境</h2><div class="language-shell highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>pip <span class="nb">install</span> <span class="nt">-r</span> requirements.txt
</pre></table></code></div></div><h1 id="三第一题hw2_1py">三、第一题（hw2_1.py）</h1><p>为了便于复现结果，本次作业统一使用 <code class="language-plaintext highlighter-rouge">np.random.seed(1234)</code> 作为随机种子！</p><p>相关数值计算结果可见于 <strong>5. 模拟结果</strong></p><h2 id="1-生成样本路径">1. 生成样本路径</h2><p>给定条件：\(S(t_0)\)=30，K=30，\(r\)=3%，\(\sigma\)=35%，T=1</p><p>使用以下公式生成样本路径：</p>\[S(t_{i+1})=S(t_{i})exp\{(r-\frac{\sigma^2}{2})(t_{i+1}-t_{i})+\sigma\sqrt{t_{i+1}-t_{i}}Z_{i+1}\} \quad i=0,1,\cdots, 251\\\] \[Z_{i+1} \sim N(0,1)\\\] \[Sample\ path_{252\times10000}=\left(\begin{matrix} s(t_1)_{1} &amp; s(t_1)_{2} &amp; \cdots &amp; s(t_{1})_{10000}\\ s(t_2)_{1} &amp; s(t_2)_{2} &amp; \cdots &amp; s(t_{2})_{10000}\\ \vdots &amp; \vdots &amp; \ddots &amp; \vdots\\ s(t_{252})_{1} &amp; s(t_{252})_{2} &amp; \cdots &amp; s(t_{252})_{10000}\\ \end{matrix}\right)\]<p>本次作业中， \( \Delta t = t_{i+1}-t_{i}=\frac{1}{252} \) ，实现样本路径可通过生成 (252, 10000) 维的标准正态随机数，之后逐行计算 S(t) ，具体可见 <code class="language-plaintext highlighter-rouge">generate_samples</code> 方法：</p><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="k">def</span> <span class="nf">generate_samples</span><span class="p">():</span>
</pre></table></code></div></div><h2 id="2-亚式期权定价">2. 亚式期权定价</h2><p>生成样本路径后，亚式期权可根据下式定价：</p>\[\bar{S_i}=\frac{1}{252}\sum_{m=1}^{252}S(t_m)_i\\\] \[\bar{c}=\frac{1}{10000}\sum_{i=1}^{10000}e^{-rT}(\bar{S_i}-K)^+\\\]<p>详情可见 <code class="language-plaintext highlighter-rouge">calculate</code> 方法：</p><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="k">def</span> <span class="nf">calculate</span><span class="p">(</span><span class="n">stock_matrix</span><span class="p">,</span> <span class="n">d_st_d_sigma_matrix</span><span class="p">,</span> <span class="n">standard_normal_matrix</span><span class="p">):</span>
</pre></table></code></div></div><h2 id="3-置信区间计算">3. 置信区间计算</h2><p>按下式计算置信区间：</p>\[c_i=e^{-rT}(\bar{S_i}-K)^+\\\] \[s^2=\frac{1}{n-1}\sum_{i=1}^{n}(c_i-\bar{c})^2\\\] \[(\bar{c}-t_{1-\frac{\alpha}{2}}(n-1)\frac{s}{\sqrt{n}}, \ \bar{c}+t_{1-\frac{\alpha}{2}}(n-1)\frac{s}{\sqrt{n}})\\\]<p>详情可见 <code class="language-plaintext highlighter-rouge">calculate</code> 方法：</p><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="k">def</span> <span class="nf">calculate</span><span class="p">(</span><span class="n">stock_matrix</span><span class="p">,</span> <span class="n">d_st_d_sigma_matrix</span><span class="p">,</span> <span class="n">standard_normal_matrix</span><span class="p">):</span>
</pre></table></code></div></div><h2 id="4-希腊字母计算">4. 希腊字母计算</h2><h3 id="41-delta计算">4.1 delta计算</h3><p>亚式期权 <strong>delta</strong> 计算在 <strong>lecturenote6</strong> 中已经给出公式，此处不再重复推导，公式如下：</p>\[\alpha^{'}(S_0)=E[e^{-rT}\mathbb{1}_{\{ \bar{S} &gt;K \}} \frac{\bar{S}}{S_0}] \approx \frac{1}{n}\sum_{i=1}^{n} e^{-rT}\mathbb{1}_{\{ \bar{S_i} &gt;K \}}\frac{\bar{S_i}}{S_0}\]<p><strong>delta</strong> 计算相对简单，并不需要新增计算，详情可见 <code class="language-plaintext highlighter-rouge">calculate</code> 方法：</p><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="k">def</span> <span class="nf">calculate</span><span class="p">(</span><span class="n">stock_matrix</span><span class="p">,</span> <span class="n">d_st_d_sigma_matrix</span><span class="p">,</span> <span class="n">standard_normal_matrix</span><span class="p">):</span>
</pre></table></code></div></div><h3 id="42-vega计算">4.2 vega计算</h3><p>亚式期权 <strong>vega</strong> 计算与 <strong>lecturenote6</strong> 中 <strong>delta</strong> 计算推导相似，但要比 <strong>delta</strong> 复杂，具体推导如下：</p>\[\alpha(\sigma)=E[e^{-rT}(\bar{S}-K)^+] = E[Y(\sigma)]\] \[\frac{\mathrm{d}}{\mathrm{d} \sigma}Y(\sigma)=e^{-rT}\mathbb{1}_{\{ \bar{S} &gt;K \}} \frac{\mathrm{d}}{\mathrm{d} \sigma} \bar{S}\] \[\frac{\mathrm{d}}{\mathrm{d} \sigma} \bar{S} = \frac{1}{m}\sum_{i=1}^{m} \frac{\mathrm{d}}{\mathrm{d} \sigma} S(t_{i})\]<p>根据 <strong>lecturenote6</strong> 中 \( S(t_{i}) \) 计算 \( \frac{\mathrm{d}}{\mathrm{d} \sigma} S(t_{i}) \) 得：</p>\[S(t_{i})=S(t_{0})exp\{(r-\frac{\sigma^2}{2})t_i+\sigma\sqrt{\Delta t}(Z_1+ \cdots +Z_i)\}\] \[\frac{\mathrm{d}}{\mathrm{d} \sigma} S(t_{i})=S(t_{i})(- \sigma t_i + \sqrt{\Delta t}(Z_1+ \cdots +Z_i))\]<p>综上得到 <strong>vega</strong> 计算式：</p>\[\alpha^{'}(\sigma)= E[e^{-rT}\mathbb{1}_{\{ \bar{S} &gt;K \}} \frac{1}{m}\sum_{i=1}^{m} S(t_{i})(- \sigma t_i + \sqrt{\Delta t}(Z_1+ \cdots +Z_i))]\]<p>可以看到， <strong>vega</strong> 与 <strong>delta</strong> 计算差别主要在 \( \frac{\mathrm{d}}{\mathrm{d} \sigma} S(t_{i}) \) 上，此处采用在生成样本路径时一起计算 \( \frac{\mathrm{d}}{\mathrm{d} \sigma} S(t_{i}) \) 的方法，详情可见 <code class="language-plaintext highlighter-rouge">generate_samples</code> 方法中 <code class="language-plaintext highlighter-rouge">d_st_d_sigma_matrix</code> 和 <code class="language-plaintext highlighter-rouge">calculate</code> 方法：</p><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="n">d_st_d_sigma_matrix</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">stock_matrix</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">*</span> <span class="p">(</span><span class="o">-</span><span class="n">VOLATILITY</span> <span class="o">*</span> <span class="n">DELTA_T</span> <span class="o">*</span> <span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="n">np</span><span class="p">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">DELTA_T</span><span class="p">)</span> <span class="o">*</span> <span class="n">sum_of_standard_normal_matrix</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>

<span class="k">def</span> <span class="nf">calculate</span><span class="p">(</span><span class="n">stock_matrix</span><span class="p">,</span> <span class="n">d_st_d_sigma_matrix</span><span class="p">,</span> <span class="n">standard_normal_matrix</span><span class="p">):</span>
</pre></table></code></div></div><h3 id="43-gamma计算">4.3 gamma计算</h3><p>亚式期权 <strong>gamma</strong> 计算使用了 <strong>likelihood ratio method</strong> ，是希腊字母计算中最复杂的，也是最容易出错的，此处使用符号与 <strong>lecturenote6</strong> 中一致，具体推导如下：</p>\[\begin{align*} \alpha^{''}(\theta) &amp;= \int_{\mathbb{R}^m} g(\vec{x}) \frac{\partial ^{2} f(\vec{x};\theta)}{\partial \theta^{2}} \mathrm{d} \vec{x} \\ &amp; = \int_{\mathbb{R}^m} g(\vec{x}) \frac{\frac{\partial ^{2} f(\vec{x};\theta)}{\partial \theta^{2}}}{f(\vec{x};\theta)} f(\vec{x};\theta) \mathrm{d} \vec{x} \\ &amp; = E[g(\vec{x}) \frac{\frac{\partial ^{2} f(\vec{x};\theta)}{\partial \theta^{2}}}{f(\vec{x};\theta)}] \end{align*}\]<h4 id="431-错误的做法">4.3.1 错误的做法</h4><p>==值得注意的是==，必须从上式开始推导，<u>不能使用</u>如下方法推导：</p>\[\alpha^{''}(\theta) =\frac{\mathrm{d}}{\mathrm{d} \theta} \alpha^{’}(\theta) = \frac{\partial }{\partial \theta} E[g(\vec{x}) \frac{\partial }{\partial \theta} log[f(\vec{x};\theta)] ]\]<p>原因在于上式第二个等号不成立</p>\[\frac{\partial }{\partial \theta} E[g(\vec{x}) \frac{\partial }{\partial \theta} log[f(\vec{x};\theta)] ] = E[g(\vec{x}) \frac{\partial }{\partial \theta} (\frac{\frac{\partial f(\vec{x};\theta)}{\partial \theta}}{f(\vec{x};\theta)})] \neq E[g(\vec{x}) \frac{\frac{\partial ^{2} f(\vec{x};\theta)}{\partial \theta^{2}}}{f(\vec{x};\theta)}]\] \[\frac{f^{''}(x)}{f(x)} \neq (\frac{f^{'}(x)}{f(x)})^{'}\]<p>因此，求 gamma <u>不能通过</u>求得 delta 的结果：\( \frac{\partial log(g(S_1, \cdots, S_m))}{\partial S_0}=\frac{Z_1}{S_0 \sigma \sqrt{\Delta t}} \) 基础上继续求导得到，如此做法在最终 gamma 结果中会少了 \(Z_1^2\) 项。</p><h4 id="432-正确的做法">4.3.2 正确的做法</h4><p>只能利用 \( \alpha^{‘’}(\theta)= E[g(\vec{x}) \frac{\frac{\partial ^{2} f(\vec{x};\theta)}{\partial \theta^{2}}}{f(\vec{x};\theta)}] \) 求 gamma，可利用中间结果 \( \frac{\partial log(g(S_1, \cdots, S_m))}{\partial S_0}=\frac{logS_1-logS_0-(r-\frac{\sigma^2}{2}) \Delta t}{S_0 \sigma^2 \Delta t} \) ，具体使用如下：</p>\[\frac{\partial g(S_1, \cdots, S_m)}{\partial S_0}=\frac{\partial log(g(S_1, \cdots, S_m))}{\partial S_0}g(S_1, \cdots, S_m)\] \[\begin{align*} \frac{\partial^2 g(S_1, \cdots, S_m)}{\partial S_0^2} &amp;=\frac{\partial }{\partial S_0} (\frac{logS_1-logS_0-(r-\frac{\sigma^2}{2}) \Delta t}{S_0 \sigma^2 \Delta t} g(S_1, \cdots, S_m)) \\ &amp;= (\frac{-1}{S_0^2 \sigma^2 \Delta t}-\frac{Z_1}{S_0^2 \sigma \sqrt{\Delta t}})g(S_1, \cdots, S_m)+\frac{logS_1-logS_0-(r-\frac{\sigma^2}{2}) \Delta t}{S_0 \sigma^2 \Delta t}\frac{\partial g(S_1, \cdots, S_m)}{\partial S_0} \\ &amp;= (\frac{-1-Z_1\sigma \sqrt{\Delta t}}{S_0^2 \sigma^2 \Delta t})g(S_1, \cdots, S_m)+(\frac{logS_1-logS_0-(r-\frac{\sigma^2}{2}) \Delta t}{S_0 \sigma^2 \Delta t})^2 g(S_1, \cdots, S_m) \\ &amp;= \frac{Z_1^2-1-Z_1\sigma \sqrt{\Delta t}}{S_0^2 \sigma^2 \Delta t}g(S_1, \cdots, S_m) \end{align*}\]<p>进而得到</p>\[\alpha^{''}(\theta) = E[e^{-rT}(\bar{S}-K)^+\frac{Z_1^2-1-Z_1\sigma \sqrt{\Delta t}}{S_0^2 \sigma^2 \Delta t}]\]<p>上述推导也可参考下面文献的 P1546-1547 (文章中分母 \(S_0\) 还是少了个平方，但总体推导思路正确 )</p><blockquote><p>[1]马俊美,杨宇婷,顾桂定,徐承龙.随机波动率模型下基于精确模拟算法的期权计算理论[J].同济大学学报(自然科学版),2017,45(10):1539-1548.</p></blockquote><p>具体代码实现可见 <code class="language-plaintext highlighter-rouge">calculate</code> 方法中：</p><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="n">pathwise_gamma</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">mean</span><span class="p">(</span><span class="n">np</span><span class="p">.</span><span class="n">exp</span><span class="p">(</span><span class="o">-</span><span class="n">RISK_FREE_RATE_OPTION</span> <span class="o">*</span> <span class="n">EXPIRES_ANNUALIZE</span><span class="p">)</span> <span class="o">*</span> <span class="n">np</span><span class="p">.</span><span class="n">maximum</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">s_i_bar_vector</span> <span class="o">-</span> <span class="n">K</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">np</span><span class="p">.</span><span class="n">power</span><span class="p">(</span><span class="n">standard_normal_matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="mi">2</span><span class="p">)</span> <span class="o">-</span> <span class="n">standard_normal_matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">VOLATILITY</span> <span class="o">*</span> <span class="n">np</span><span class="p">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">DELTA_T</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">np</span><span class="p">.</span><span class="n">power</span><span class="p">(</span><span class="n">S_0</span> <span class="o">*</span> <span class="n">VOLATILITY</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="n">DELTA_T</span><span class="p">))</span>
</pre></table></code></div></div><h2 id="5-模拟结果">5. 模拟结果</h2><p>计算结果也可见于： <strong>hw2_1.txt</strong></p><p>注意：gamma 由于是二阶导，本次作业也只取了10000个 sample path ，因此随机种子设置不同会导致结果相差非常大。因此再次强调：以下是设定 <code class="language-plaintext highlighter-rouge">np.random.seed(1234)</code> 下计算出的结果：</p><div class="table-wrapper"><table><thead><tr><th>Asion option price<th>2.633973843392969<tbody><tr><td>confidence interval<td>[2.5490384687955756, 2.7189092179903622]<tr><td>delta<td>0.5529336723428989<tr><td>vega<td>6.873542661601932<tr><td>gamma<td>0.1917685559177979</table></div><h1 id="四第二题hw2_2py">四、第二题（hw2_2.py）</h1><p>由于洪教授上课 lecturenote5 中 Longstaff-Schwartz 方法与 Longstaff-Schwartz (2001)：Valuing American Options by Simulation: A Simple Least-Squares Approach 原文有所不同，故此处使用了三种方法并比较结果和运行速度。</p><p>数值计算结果见 <strong>5.计算结果</strong></p><h2 id="1-生成样本路径-1">1. 生成样本路径</h2><p>参考第一题生成样本路径方法，完全一样</p><h2 id="2-tsitsiklis-et-al1999方法">2. Tsitsiklis et al.(1999)方法</h2><blockquote><p>Roy J N T B V . Optimal Stopping of Markov Processes: Hilbert Space Theory, Approximation Algorithms, and an Application to Pricing High-Dimensional Financial Derivatives[J]. Automatic Control IEEE Transactions on, 1999, 44(10):1840-1851.</p><p>格拉瑟曼, PaulGlasserman, Glasserman, et al. 金融工程中的蒙特卡罗方法[M]. 高等教育出版社, 2013.</p></blockquote><p>其实，洪教授 lecturenote5 中的 Longstaff-Schwartz 方法是Tsitsiklis et al. (1999)方法，通过多项式回归拟合Continue Value 之后，进而通过下式使用从后向前逐步递推方法获取期权价值（具体算法由于讲义中有不在此处详述）：</p>\[\widetilde{V_{m-1,j}} = \max \{(K-S_{m-1,j})^+, C_{m-1}(S_{m-1,j}) \}\]<h3 id="21-优点">2.1 优点</h3><p>优点是计算简单、理解容易，相比 Longstaff-Schwartz (2001) 原文中的方法少了判断 in the money 以及动态规划部分，理解也相对容易是一种非常直觉的 <strong>拟合—继续价值与立即行权价值取最大—继续向前计算</strong> 流程。</p><h3 id="22-缺点">2.2 缺点</h3><ol><li>容易高估期权价值。从上式也可以看到，如果 Continue Value 拟合值 \( C_{m-1}(S_{m-1,j}) \) 十分大（高估许多），是会影响到后续许多步的拟合值，也可能最终直接影响期权价值 \(V_0\) 。那为什么说这个方法容易高估呢，因为拟合值 \( C_{m-1}(S_{m-1,j}) \) 十分小的时候会选取 \( (K-S_{m-1,j})^+ \) 作为下一次拟合依据，影响并不是那么大。</li><li>由1，自然地，该方法对拟合精度要求高。</li><li>该方法与常规美式期权（二叉树计算）思路并不同，拟合出 Continue Value，不仅用作判断是否 exercise ，还可能用到下一次拟合和以及影响期权定价。</li></ol><p>具体实现可见 <code class="language-plaintext highlighter-rouge">tsitsiklis</code> 方法：</p><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="k">def</span> <span class="nf">tsitsiklis</span><span class="p">(</span><span class="n">stock_matrix</span><span class="p">):</span>
</pre></table></code></div></div><h2 id="3-longstaff-schwartz">3. Longstaff-Schwartz</h2><blockquote><p>Longstaff F A , Schwartz E S . Valuing American Options by Simulation: A Simple Least-Squares Approach[J]. Review of Financial Studies, 2001(1):113-147.</p><p>格拉瑟曼, PaulGlasserman, Glasserman, et al. 金融工程中的蒙特卡罗方法[M]. 高等教育出版社, 2013.</p></blockquote><p>Longstaff-Schwartz(2001) 原文P117：”We use only in-the-money paths since it allows us to better estimate the conditional expectation function in the region where exercise is relevant and significantly improves the efficiency of the algorithm.”</p><p>上述说明Longstaff-Schwartz(2001)只选择那些 in-the-money paths 进行多项式回归拟合，因为与二叉树计算美式看跌期权思路一致：当期如果立即执行期权收益为0，那么不管Continue Value是多少，总是会选择不执行。</p><p>通过查看 Longstaff-Schwartz(2001) 原文中 P115-120例子可以发现（文章相对易懂可看）：</p><ol><li>拟合的Continue Value仅用作判断是否当期执行，如果确定当期执行会把后续现金流全设为0（已经执行自然没有现金流），这一点也符合二叉树计算美式看跌期权的思路</li><li>拟合用的Y是 in-the-money paths 中向后追述第一个也是唯一一个现金流大于0的值。因为 Longstaff-Schwartz(2001) 原文方法考虑整体现金流，因此最终期权价值是整个现金流矩阵折现得到，相关计算也使用了动态规划思想</li></ol><p>《金融工程中的蒙特卡罗方法》中 P434 也提及了两种方法差别。</p><h3 id="31-优点">3.1 优点</h3><p>计算更精准，并且计算思路与二叉树方法计算美式看跌期权价格一致。</p><h3 id="32-缺点">3.2 缺点</h3><p>动态规划耗时较长，且程序相对不易实现</p><p>本次作业针对其耗时较长的缺点，通过程序设计可以优化大大缩短时长</p><h3 id="33-优化思路">3.3 优化思路</h3><p>首先要深入理解 Longstaff-Schwartz 方法，该方法其实每一步都分为 out-of-money 和 in-the-money ，再通过对 in-the-money 细分，最终形成三部分：out-of-money、continue、exercise，其中后两部分是 in-the-money 部分的细分。</p><p><strong>优化方法</strong> ：还是利用 Tsitsiklis et al. (1999) 方法逐步向前推进的思路，具体地，每一步：把那些 out-of-money 的 以及 判断要 continue 的 sample path 的上一期现金流折现到当前步，其余判断要 exercise 的 sample path 自然地选择 \( K-S_t \) 作为当期现金流，如此逐步向前迭代下去。</p><p>这么做的好处是：实质上每次计算只需用当前步和上一期的现金流数据，而动态规划需要用整个现金流矩阵，并且动态规划判断要 continue 时向后追述现金流以及判断要 exercise 时向后将现金流都设置为0都是十分耗时的。</p><p>详细实现可见 <code class="language-plaintext highlighter-rouge">longstaff_schwartz</code> 方法：</p><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="k">def</span> <span class="nf">longstaff_schwartz</span><span class="p">(</span><span class="n">stock_matrix</span><span class="p">):</span>
</pre></table></code></div></div><h2 id="4-结合longstaff-schwartz和tsitsiklis">4. 结合Longstaff-Schwartz和Tsitsiklis</h2><p>优缺点也介于两种方法之间。</p><p>与 Longstaff-Schwartz 方法相同的是，把那些 out-of-money 的现金流折现；但是，不同的是，根据判断结果确定要 continue 时，现金流使用多项式回归拟合的 Continue Value ，具体可见 <code class="language-plaintext highlighter-rouge">longstaff_schwartz_combine_tsitsiklis</code> 方法</p><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="k">def</span> <span class="nf">longstaff_schwartz_combine_tsitsiklis</span><span class="p">(</span><span class="n">stock_matrix</span><span class="p">):</span>
</pre></table></code></div></div><h2 id="5-计算结果">5. 计算结果</h2><h3 id="51-说明以及结果展示">5.1 说明以及结果展示</h3><p>其实 Longstaff-Schwartz 方法已有学者在github上实现：<a href="https://github.com/aminjellali/Longstaff-and-Schwartz.git">https://github.com/aminjellali/Longstaff-and-Schwartz.git</a></p><p>该作者完全使用原文动态规划思路进行编程，我对他的程序稍作修改之后使不同程序能在结果上一致，进而进行性能比较：</p><ol><li>该作者期权参数与题目给定不同</li><li>该作者使用了Laguerre多项式，与Longstaff_Schwartz(2001)和洪教授讲义使用一般多项式不同</li></ol><p>修改完形成 <strong>LSM.py</strong> 文件。</p><p>我自己写的程序是 <strong>hw2_2.py</strong> 程序中有上述提及的三种方法实现，比较结果如下（结果也保存在了 <strong>hw2_2.txt</strong> 和 <strong>hw2_2_compare.txt</strong> 文件中）：</p><div class="table-wrapper"><table><thead><tr><th>hw2_2.py<th> <tbody><tr><td>Longstaff_Schwartz (2001)计算用时<td>2.655221536755562<tr><td>Longstaff_Schwartz (2001) price<td>3.8151357853081094<tr><td>Combine of (Longstaff_Schwartz, 2001) and (Tsitsiklis et al, 1999) price<td>3.8306045815398466<tr><td>Tsitsiklis et al. (1999) or the lecturenote5 from Prof. L. Jeff Hong price<td>4.4527336640111255<tr><td><strong>LSM.py</strong><td> <tr><td>Longstaff_Schwartz (2001) price<td>3.815135785308124<tr><td>Longstaff_Schwartz (2001)计算用时<td>172.07279300689697</table></div><h3 id="52-总结">5.2 总结</h3><ol><li>可以看到计算结果一致情况下，<strong>hw2_2.py</strong> 中 Longstaff_Schwartz(2001) 方法用时快了65倍（其实有一种情况是必须使用动态规划的，那就是想要知道执行期权的具体时刻，即 Longstaff Schwartz (2001) P119 stopping rule 表格。如果只关心定价则可使用 <strong>hw2_2.py</strong> ）</li><li>可以看到，Tsitsiklis 方法确实会高估期权价值，两者结合也确实介于两者之间</li><li><strong>注</strong> ：同样的参数，第一次作业美式看跌期权计算结果为：3.7557436745895885，显然 Longstaff Schwartz(2001) 是与该结果最接近的，这与他们思路相同也有关系</li></ol></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/blogging/'>Blogging</a>, <a href='/categories/finance/'>Finance</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/asian-option/" class="post-tag no-text-decoration" >Asian Option</a> <a href="/tags/monto-carlo/" class="post-tag no-text-decoration" >Monto Carlo</a> <a href="/tags/option-pricing/" class="post-tag no-text-decoration" >Option Pricing</a> <a href="/tags/longstaff-schwartz/" class="post-tag no-text-decoration" >Longstaff-Schwartz</a> <a href="/tags/likelihood-ratio/" class="post-tag no-text-decoration" >likelihood ratio</a> <a href="/tags/pathwise/" class="post-tag no-text-decoration" >pathwise</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a> by the author.</div><!-- Post sharing snippet v2.1 https://github.com/cotes2020/jekyll-theme-chirpy © 2019 Cotes Chung Published under the MIT License --><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Financial risk management homework 2 - Zhihao HUANG&url=https://huangzhihao1994.github.io//posts/financial-risk-management-hw2/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Financial risk management homework 2 - Zhihao HUANG&u=https://huangzhihao1994.github.io//posts/financial-risk-management-hw2/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=Financial risk management homework 2 - Zhihao HUANG&url=https://huangzhihao1994.github.io//posts/financial-risk-management-hw2/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank"> <i class="fa-fw fab fa-telegram"></i> </a> <a href="http://service.weibo.com/share/share.php?title=Financial risk management homework 2 - Zhihao HUANG&url=https://huangzhihao1994.github.io//posts/financial-risk-management-hw2/" data-toggle="tooltip" data-placement="top" title="Weibo" target="_blank"> <i class="fa-fw fab fa-weibo"></i> </a> <i class="fa-fw fas fa-link small" onclick="copyLink()" data-toggle="tooltip" data-placement="top" title="Copy link"></i> </span></div></div></div></div></div><!-- The Pannel on right side (Desktop views) v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2017-2019 Cotes Chung MIT License --><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"><h3 data-toc-skip>Recent Update</h3><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/financial-risk-management-hw2/">Financial risk management homework 2</a></li><li><a href="/posts/financial-risk-management-hw1/">Financial risk management homework 1</a></li><li><a href="/posts/html-elements/">HTML elements</a></li><li><a href="/posts/write-a-new-post/">Writing a New Post</a></li><li><a href="/posts/text-and-typography/">Text and Typography</a></li></ul></div><div id="access-tags"><h3 data-toc-skip>Trending Tags</h3><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/option-pricing/">Option Pricing</a> <a class="post-tag" href="/tags/monto-carlo/">Monto Carlo</a> <a class="post-tag" href="/tags/writing/">writing</a> <a class="post-tag" href="/tags/typography/">typography</a> <a class="post-tag" href="/tags/pathwise/">pathwise</a> <a class="post-tag" href="/tags/likelihood-ratio/">likelihood ratio</a> <a class="post-tag" href="/tags/getting-started/">getting started</a> <a class="post-tag" href="/tags/favicon/">favicon</a> <a class="post-tag" href="/tags/longstaff-schwartz/">Longstaff Schwartz</a> <a class="post-tag" href="/tags/investment/">Investment</a></div></div></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"> <!-- Recommend the other 3 posts according to the tags and categories of the current post, if the number is not enough, use the other latest posts to supplement. v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2019 Cotes Chung Published under the MIT License --><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/financial-risk-management-hw1/"><div class="card-body"> <!-- Date format snippet v2.4.1 https://github.com/cotes2020/jekyll-theme-chirpy © 2020 Cotes Chung MIT License --> <span class="timeago small" > Oct 21 <i class="unloaded">2020-10-21T16:34:00+08:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Financial risk management homework 1</h3><div class="text-muted small"><p> 相关代码和结果 一、涉及内容 第一次作业涉及： 投资组合理论（第一题）： 马科维茨（Markowitz）投资组合二次规划求解、蒙特卡洛方法求解有效前沿、资本市场线、动态调整权重 CAPM模型（第二题）： Beta系数求解、alpha检验、GRS检验 期权定价模型（第三题）： n步二叉树欧式美式看涨看跌期权定价、Black Scholes公式（BS公式）看涨...</p></div></div></a></div><div class="card"> <a href="/posts/text-and-typography/"><div class="card-body"> <!-- Date format snippet v2.4.1 https://github.com/cotes2020/jekyll-theme-chirpy © 2020 Cotes Chung MIT License --> <span class="timeago small" > Aug 8, 2019 <i class="unloaded">2019-08-08T11:33:00+08:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Text and Typography</h3><div class="text-muted small"><p> This Jekyll template totally compatible with Markdown syntax. Now, let’s have a look at the text and typography. Titles H1 H2 H3 H4 Paragraph I wandered lonely as a cloud That floats on...</p></div></div></a></div><div class="card"> <a href="/posts/write-a-new-post/"><div class="card-body"> <!-- Date format snippet v2.4.1 https://github.com/cotes2020/jekyll-theme-chirpy © 2020 Cotes Chung MIT License --> <span class="timeago small" > Aug 8, 2019 <i class="unloaded">2019-08-08T14:10:00+08:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Writing a New Post</h3><div class="text-muted small"><p> Naming and Path Create a new file named YYYY-MM-DD-TITLE.EXTENSION and put it in the _post/ of the root directory. Please note that the EXTENSION must be one of md and markdown. From v2.4.1, you c...</p></div></div></a></div></div></div><!-- Navigation buttons at the bottom of the post. v2.1 https://github.com/cotes2020/jekyll-theme-chirpy © 2020 Cotes Chung MIT License --><div class="post-navigation d-flex justify-content-between"> <a href="/posts/financial-risk-management-hw1/" class="btn btn-outline-primary"><p>Financial risk management homework 1</p></a> <span class="btn btn-outline-primary disabled"><p>-</p></span></div></div></div></div><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lozad/dist/lozad.min.js"></script> <script type="text/javascript"> const imgs = document.querySelectorAll('#post-wrapper img'); const observer = lozad(imgs); observer.observe(); </script> <!-- The Footer v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2017-2019 Cotes Chung MIT License --><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2020 <a href="https://twitter.com/Zhihao HUANG">Zhihao HUANG</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy/">Chirpy</a> theme.</p></div></div></footer></div><!-- The Search results v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2017-2019 Cotes Chung MIT License --><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-xl-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4><a class="post-tag" href="/tags/option-pricing/">Option Pricing</a> <a class="post-tag" href="/tags/monto-carlo/">Monto Carlo</a> <a class="post-tag" href="/tags/writing/">writing</a> <a class="post-tag" href="/tags/typography/">typography</a> <a class="post-tag" href="/tags/pathwise/">pathwise</a> <a class="post-tag" href="/tags/likelihood-ratio/">likelihood ratio</a> <a class="post-tag" href="/tags/getting-started/">getting started</a> <a class="post-tag" href="/tags/favicon/">favicon</a> <a class="post-tag" href="/tags/longstaff-schwartz/">Longstaff Schwartz</a> <a class="post-tag" href="/tags/investment/">Investment</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <!-- The GA snippet v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2017-2019 Cotes Chung MIT License --> <script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','https://www.google-analytics.com/analytics.js','ga'); ga('create', 'UA-179092433-1', 'auto'); ga('send', 'pageview'); </script> <!-- Jekyll Simple Search loader v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2017-2019 Cotes Chung MIT License --> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.7.3/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="https://huangzhihao1994.github.io/{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"><div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>{categories}</div><div><i class="fa fa-tag fa-fw"></i>{tags}</div></div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>' }); </script>
